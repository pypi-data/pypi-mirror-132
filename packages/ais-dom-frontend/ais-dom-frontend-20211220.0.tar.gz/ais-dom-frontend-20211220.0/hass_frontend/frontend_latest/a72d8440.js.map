{"version":3,"file":"a72d8440.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;;AC9DA;AACA;AACA;;;;AAIA;;AAGA;AArBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHA;AAoEA;;AApEA;ACgBA;AACA;;AAfA;;;;;;;;;;;;;;;AAAA;;ACqBA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;;AAKA;;;;AAOA;;;;AAMA;AACA;;;;;;;;;;AA5CA;;;;;;;;;;;;;;;;;;;;;ACyBA;;;;;;;;;;ACjBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+EA;;;;;;;;;;;;;;;;;;;;;AC/DA;;;;ACvBA;;;;;;;;;;;;;;;;;;;ACgBA;;;;;;;;;;;;;;;;;;;;;;;;;ACKA;;;;;;;ACjBA;;ACLA;;;;AAMA;;;;;;AAdA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AC8BA;AACA;AACA;AACA;;;;;;;AAOA;;;;;;AAMA;AACA;;AAEA;;;;AAlCA;;;;;;;;;;;;AAAA;AC8KA;AAEA","sources":["webpack://home-assistant-frontend/./node_modules/@polymer/paper-item/paper-icon-item.js","webpack://home-assistant-frontend/./src/components/buttons/ha-progress-button.ts","webpack://home-assistant-frontend/./src/components/ha-card.ts","webpack://home-assistant-frontend/./src/components/ha-icon-button.ts","webpack://home-assistant-frontend/./src/panels/config/customize/ha-config-customize.ts","webpack://home-assistant-frontend/./src/panels/config/customize/ha-customize-attribute.js","webpack://home-assistant-frontend/./src/panels/config/customize/ha-form-customize-attributes.js","webpack://home-assistant-frontend/./src/panels/config/customize/ha-form-customize.js","webpack://home-assistant-frontend/./src/panels/config/customize/types/ha-customize-array.js","webpack://home-assistant-frontend/./src/panels/config/customize/types/ha-customize-boolean.js","webpack://home-assistant-frontend/./src/panels/config/customize/types/ha-customize-icon.js","webpack://home-assistant-frontend/./src/panels/config/customize/types/ha-customize-key-value.js","webpack://home-assistant-frontend/./src/panels/config/customize/types/ha-customize-string.js","webpack://home-assistant-frontend/./src/panels/config/ha-config-section.ts","webpack://home-assistant-frontend/./src/panels/config/ha-entity-config.ts","webpack://home-assistant-frontend/./src/util/hass-attributes-util.ts"],"sourcesContent":["/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\nimport '@polymer/polymer/polymer-legacy.js';\nimport '@polymer/iron-flex-layout/iron-flex-layout.js';\nimport '@polymer/paper-styles/typography.js';\nimport './paper-item-shared-styles.js';\n\nimport {Polymer} from '@polymer/polymer/lib/legacy/polymer-fn.js';\nimport {html} from '@polymer/polymer/lib/utils/html-tag.js';\n\nimport {PaperItemBehavior} from './paper-item-behavior.js';\n\n/*\n`<paper-icon-item>` is a convenience element to make an item with icon. It is an\ninteractive list item with a fixed-width icon area, according to Material\nDesign. This is useful if the icons are of varying widths, but you want the item\nbodies to line up. Use this like a `<paper-item>`. The child node with the slot\nname `item-icon` is placed in the icon area.\n\n    <paper-icon-item>\n      <iron-icon icon=\"favorite\" slot=\"item-icon\"></iron-icon>\n      Favorite\n    </paper-icon-item>\n    <paper-icon-item>\n      <div class=\"avatar\" slot=\"item-icon\"></div>\n      Avatar\n    </paper-icon-item>\n\n### Styling\n\nThe following custom properties and mixins are available for styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--paper-item-icon-width` | Width of the icon area | `56px`\n`--paper-item-icon` | Mixin applied to the icon area | `{}`\n`--paper-icon-item` | Mixin applied to the item | `{}`\n`--paper-item-selected-weight` | The font weight of a selected item | `bold`\n`--paper-item-selected` | Mixin applied to selected paper-items | `{}`\n`--paper-item-disabled-color` | The color for disabled paper-items | `--disabled-text-color`\n`--paper-item-disabled` | Mixin applied to disabled paper-items | `{}`\n`--paper-item-focused` | Mixin applied to focused paper-items | `{}`\n`--paper-item-focused-before` | Mixin applied to :before focused paper-items | `{}`\n\n*/\nPolymer({\n  _template: html`\n    <style include=\"paper-item-shared-styles\"></style>\n    <style>\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n        @apply --paper-icon-item;\n      }\n\n      .content-icon {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n\n        width: var(--paper-item-icon-width, 56px);\n        @apply --paper-item-icon;\n      }\n    </style>\n\n    <div id=\"contentIcon\" class=\"content-icon\">\n      <slot name=\"item-icon\"></slot>\n    </div>\n    <slot></slot>\n`,\n\n  is: 'paper-icon-item',\n  behaviors: [PaperItemBehavior]\n});\n","import \"@material/mwc-button\";\nimport type { Button } from \"@material/mwc-button\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport \"../ha-circular-progress\";\n\n@customElement(\"ha-progress-button\")\nexport class HaProgressButton extends LitElement {\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public progress = false;\n\n  @property({ type: Boolean }) public raised = false;\n\n  @query(\"mwc-button\", true) private _button?: Button;\n\n  public render(): TemplateResult {\n    return html`\n      <mwc-button\n        ?raised=${this.raised}\n        .disabled=${this.disabled || this.progress}\n        @click=${this._buttonTapped}\n      >\n        <slot></slot>\n      </mwc-button>\n      ${this.progress\n        ? html`<div class=\"progress\">\n            <ha-circular-progress size=\"small\" active></ha-circular-progress>\n          </div>`\n        : \"\"}\n    `;\n  }\n\n  public actionSuccess(): void {\n    this._tempClass(\"success\");\n  }\n\n  public actionError(): void {\n    this._tempClass(\"error\");\n  }\n\n  private _tempClass(className: string): void {\n    this._button!.classList.add(className);\n    setTimeout(() => {\n      this._button!.classList.remove(className);\n    }, 1000);\n  }\n\n  private _buttonTapped(ev: Event): void {\n    if (this.progress) {\n      ev.stopPropagation();\n    }\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        outline: none;\n        display: inline-block;\n        position: relative;\n      }\n\n      mwc-button {\n        transition: all 1s;\n      }\n\n      mwc-button.success {\n        --mdc-theme-primary: white;\n        background-color: var(--success-color);\n        transition: none;\n      }\n\n      mwc-button[raised].success {\n        --mdc-theme-primary: var(--success-color);\n        --mdc-theme-on-primary: white;\n      }\n\n      mwc-button.error {\n        --mdc-theme-primary: white;\n        background-color: var(--error-color);\n        transition: none;\n      }\n\n      mwc-button[raised].error {\n        --mdc-theme-primary: var(--error-color);\n        --mdc-theme-on-primary: white;\n      }\n\n      .progress {\n        bottom: 0;\n        margin-top: 4px;\n        position: absolute;\n        text-align: center;\n        top: 0;\n        width: 100%;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-progress-button\": HaProgressButton;\n  }\n}\n","import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\n\n@customElement(\"ha-card\")\nexport class HaCard extends LitElement {\n  @property() public header?: string;\n\n  @property({ type: Boolean, reflect: true }) public outlined = false;\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        background: var(\n          --ha-card-background,\n          var(--card-background-color, white)\n        );\n        border-radius: var(--ha-card-border-radius, 4px);\n        box-shadow: var(\n          --ha-card-box-shadow,\n          0px 2px 1px -1px rgba(0, 0, 0, 0.2),\n          0px 1px 1px 0px rgba(0, 0, 0, 0.14),\n          0px 1px 3px 0px rgba(0, 0, 0, 0.12)\n        );\n        color: var(--primary-text-color);\n        display: block;\n        transition: all 0.3s ease-out;\n        position: relative;\n      }\n\n      :host([outlined]) {\n        box-shadow: none;\n        border-width: var(--ha-card-border-width, 1px);\n        border-style: solid;\n        border-color: var(\n          --ha-card-border-color,\n          var(--divider-color, #e0e0e0)\n        );\n      }\n\n      .card-header,\n      :host ::slotted(.card-header) {\n        color: var(--ha-card-header-color, --primary-text-color);\n        font-family: var(--ha-card-header-font-family, inherit);\n        font-size: var(--ha-card-header-font-size, 24px);\n        letter-spacing: -0.012em;\n        line-height: 48px;\n        padding: 12px 16px 16px;\n        display: block;\n        margin-block-start: 0px;\n        margin-block-end: 0px;\n        font-weight: normal;\n      }\n\n      :host ::slotted(.card-content:not(:first-child)),\n      slot:not(:first-child)::slotted(.card-content) {\n        padding-top: 0px;\n        margin-top: -8px;\n      }\n\n      :host ::slotted(.card-content) {\n        padding: 16px;\n      }\n\n      :host ::slotted(.card-actions) {\n        border-top: 1px solid var(--divider-color, #e8e8e8);\n        padding: 5px 16px;\n      }\n    `;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      ${this.header\n        ? html`<h1 class=\"card-header\">${this.header}</h1>`\n        : html``}\n      <slot></slot>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-card\": HaCard;\n  }\n}\n","import \"@material/mwc-icon-button\";\nimport { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport \"./ha-icon\";\n\n@customElement(\"ha-icon-button\")\nexport class HaIconButton extends LitElement {\n  @property({ type: Boolean, reflect: true }) disabled = false;\n\n  @property({ type: String }) icon = \"\";\n\n  @property({ type: String }) label = \"\";\n\n  static shadowRootOptions: ShadowRootInit = {\n    mode: \"open\",\n    delegatesFocus: true,\n  };\n\n  protected render(): TemplateResult {\n    return html`\n      <mwc-icon-button .label=${this.label} .disabled=${this.disabled}>\n        <ha-icon .icon=${this.icon}></ha-icon>\n      </mwc-icon-button>\n    `;\n  }\n\n  static get styles(): CSSResultGroup {\n    return css`\n      :host {\n        display: inline-block;\n        outline: none;\n      }\n      :host([disabled]) {\n        pointer-events: none;\n      }\n      mwc-icon-button {\n        --mdc-theme-on-primary: currentColor;\n        --mdc-theme-text-disabled-on-light: var(--disabled-text-color);\n      }\n      ha-icon {\n        --ha-icon-display: inline;\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon-button\": HaIconButton;\n  }\n}\n","import { css, CSSResultGroup, html, LitElement, TemplateResult } from \"lit\";\nimport { property } from \"lit/decorators\";\nimport \"../../../components/ha-card\";\nimport \"../../../layouts/hass-loading-screen\";\nimport \"../../../layouts/hass-tabs-subpage\";\nimport { haStyle } from \"../../../resources/styles\";\nimport { HomeAssistant, Route } from \"../../../types\";\nimport { documentationUrl } from \"../../../util/documentation-url\";\nimport \"../ha-config-section\";\nimport \"../ha-entity-config\";\nimport { configSections } from \"../ha-panel-config\";\nimport \"./ha-form-customize\";\n\nclass HaConfigCustomize extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public isWide?: boolean;\n\n  @property() public narrow?: boolean;\n\n  @property() public route!: Route;\n\n  @property() private _selectedEntityId = \"\";\n\n  protected render(): TemplateResult {\n    return html`\n      <hass-tabs-subpage\n      .hass=${this.hass}\n        .narrow=${this.narrow}\n        .route=${this.route}\n        back-path=\"/config\"\n        .tabs=${configSections.advanced}\n      >\n        <ha-config-section .isWide=${this.isWide}>\n            <span slot=\"header\">\n            ${this.hass.localize(\"ui.panel.config.customize.picker.header\")}\n            </span>\n            <span slot=\"introduction\">\n            ${this.hass.localize(\n              \"ui.panel.config.customize.picker.introduction\"\n            )}\n              <br />\n              <a\n              href=${documentationUrl(\n                this.hass,\n                \"/docs/configuration/customizing-devices/#customization-using-the-ui\"\n              )}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n              ${this.hass.localize(\n                \"ui.panel.config.customize.picker.documentation\"\n              )}\n              </a>\n            </span>\n            <ha-entity-config\n              .hass=${this.hass}\n              .selectedEntityId=${this._selectedEntityId}\n            >\n            </ha-entity-config>\n          </ha-config-section>\n        </div>\n      </hass-tabs-subpage>\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n\n    if (!this.route.path.includes(\"/edit/\")) {\n      return;\n    }\n    const routeSegments = this.route.path.split(\"/edit/\");\n    this._selectedEntityId = routeSegments.length > 1 ? routeSegments[1] : \"\";\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        a {\n          color: var(--primary-color);\n        }\n      `,\n    ];\n  }\n}\ncustomElements.define(\"ha-config-customize\", HaConfigCustomize);\n","import { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"../../../components/ha-icon-button\";\nimport hassAttributeUtil from \"../../../util/hass-attributes-util\";\nimport \"../ha-form-style\";\nimport \"./types/ha-customize-array\";\nimport \"./types/ha-customize-boolean\";\nimport \"./types/ha-customize-icon\";\nimport \"./types/ha-customize-key-value\";\nimport \"./types/ha-customize-string\";\n\nclass HaCustomizeAttribute extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"ha-form-style\">\n        :host {\n          display: block;\n          position: relative;\n          padding-right: 40px;\n        }\n\n        .button {\n          position: absolute;\n          margin-top: -20px;\n          top: 50%;\n          right: 0;\n        }\n      </style>\n      <div id=\"wrapper\" class=\"form-group\"></div>\n      <ha-icon-button\n        class=\"button\"\n        icon=\"[[getIcon(item.secondary)]]\"\n        on-click=\"tapButton\"\n      ></ha-icon-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notify: true,\n        observer: \"itemObserver\",\n      },\n    };\n  }\n\n  tapButton() {\n    if (this.item.secondary) {\n      this.item = { ...this.item, secondary: false };\n    } else {\n      this.item = { ...this.item, closed: true };\n    }\n  }\n\n  getIcon(secondary) {\n    return secondary ? \"hass:pencil\" : \"hass:close\";\n  }\n\n  itemObserver(item) {\n    const wrapper = this.$.wrapper;\n    const tag = hassAttributeUtil.TYPE_TO_TAG[item.type].toUpperCase();\n    let child;\n    if (wrapper.lastChild && wrapper.lastChild.tagName === tag) {\n      child = wrapper.lastChild;\n    } else {\n      if (wrapper.lastChild) {\n        wrapper.removeChild(wrapper.lastChild);\n      }\n      // Creating an element with upper case works fine in Chrome, but in FF it doesn't immediately\n      // become a defined Custom Element. Polymer does that in some later pass.\n      this.$.child = child = document.createElement(tag.toLowerCase());\n      child.className = \"form-control\";\n      child.addEventListener(\"item-changed\", () => {\n        this.item = { ...child.item };\n      });\n    }\n    child.setProperties({ item: this.item });\n    if (child.parentNode === null) {\n      wrapper.appendChild(child);\n    }\n  }\n}\ncustomElements.define(\"ha-customize-attribute\", HaCustomizeAttribute);\n","import { MutableData } from \"@polymer/polymer/lib/mixins/mutable-data\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"./ha-customize-attribute\";\n\nclass HaFormCustomizeAttributes extends MutableData(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        [hidden] {\n          display: none;\n        }\n      </style>\n      <template is=\"dom-repeat\" items=\"{{attributes}}\" mutable-data=\"\">\n        <ha-customize-attribute item=\"{{item}}\" hidden$=\"[[item.closed]]\">\n        </ha-customize-attribute>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      attributes: {\n        type: Array,\n        notify: true,\n      },\n    };\n  }\n}\ncustomElements.define(\n  \"ha-form-customize-attributes\",\n  HaFormCustomizeAttributes\n);\n","import \"@polymer/paper-dropdown-menu/paper-dropdown-menu\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport { computeStateDomain } from \"../../../common/entity/compute_state_domain\";\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport \"../../../styles/polymer-ha-style\";\nimport { documentationUrl } from \"../../../util/documentation-url\";\nimport hassAttributeUtil from \"../../../util/hass-attributes-util\";\nimport \"../ha-form-style\";\nimport \"./ha-form-customize-attributes\";\n\nexport class HaFormCustomize extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style ha-form-style\">\n        .warning {\n          color: red;\n        }\n\n        .attributes-text {\n          padding-left: 20px;\n        }\n      </style>\n      <template\n        is=\"dom-if\"\n        if=\"[[computeShowWarning(localConfig, globalConfig)]]\"\n      >\n        <div class=\"warning\">\n          [[localize('ui.panel.config.customize.warning.include_sentence')]]\n          <a\n            href=\"[[_computeDocumentationUrl(hass)]]\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            >[[localize('ui.panel.config.customize.warning.include_link')]]</a\n          >.<br />\n          [[localize('ui.panel.config.customize.warning.not_applied')]]\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[hasLocalAttributes]]\">\n        <p class=\"attributes-text\">\n          [[localize('ui.panel.config.customize.attributes_customize')]]<br />\n        </p>\n        <ha-form-customize-attributes\n          attributes=\"{{localAttributes}}\"\n        ></ha-form-customize-attributes>\n      </template>\n      <template is=\"dom-if\" if=\"[[hasGlobalAttributes]]\">\n        <p class=\"attributes-text\">\n          [[localize('ui.panel.config.customize.attributes_outside')]]<br />\n          [[localize('ui.panel.config.customize.different_include')]]\n        </p>\n        <ha-form-customize-attributes\n          attributes=\"{{globalAttributes}}\"\n        ></ha-form-customize-attributes>\n      </template>\n      <template is=\"dom-if\" if=\"[[hasExistingAttributes]]\">\n        <p class=\"attributes-text\">\n          [[localize('ui.panel.config.customize.attributes_set')]]<br />\n          [[localize('ui.panel.config.customize.attributes_override')]]\n        </p>\n        <ha-form-customize-attributes\n          attributes=\"{{existingAttributes}}\"\n        ></ha-form-customize-attributes>\n      </template>\n      <template is=\"dom-if\" if=\"[[hasNewAttributes]]\">\n        <p class=\"attributes-text\">\n          [[localize('ui.panel.config.customize.attributes_not_set')]]\n        </p>\n        <ha-form-customize-attributes\n          attributes=\"{{newAttributes}}\"\n        ></ha-form-customize-attributes>\n      </template>\n      <template is=\"dom-if\" if=\"[[entity]]\">\n        <div class=\"form-group\">\n          <paper-dropdown-menu\n            label=\"[[localize('ui.panel.config.customize.pick_attribute')]]\"\n            class=\"flex\"\n            dynamic-align=\"\"\n          >\n            <paper-listbox\n              slot=\"dropdown-content\"\n              selected=\"{{selectedNewAttribute}}\"\n            >\n              <template\n                is=\"dom-repeat\"\n                items=\"[[newAttributesOptions]]\"\n                as=\"option\"\n              >\n                <paper-item>[[option]]</paper-item>\n              </template>\n            </paper-listbox>\n          </paper-dropdown-menu>\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      entity: Object,\n\n      localAttributes: {\n        type: Array,\n        computed: \"computeLocalAttributes(localConfig)\",\n      },\n      hasLocalAttributes: Boolean,\n\n      globalAttributes: {\n        type: Array,\n        computed: \"computeGlobalAttributes(localConfig, globalConfig)\",\n      },\n      hasGlobalAttributes: Boolean,\n\n      existingAttributes: {\n        type: Array,\n        computed:\n          \"computeExistingAttributes(localConfig, globalConfig, entity)\",\n      },\n      hasExistingAttributes: Boolean,\n\n      newAttributes: {\n        type: Array,\n        value: [],\n      },\n      hasNewAttributes: Boolean,\n\n      newAttributesOptions: Array,\n      selectedNewAttribute: {\n        type: Number,\n        value: -1,\n        observer: \"selectedNewAttributeObserver\",\n      },\n\n      localConfig: Object,\n      globalConfig: Object,\n    };\n  }\n\n  static get observers() {\n    return [\n      \"attributesObserver(localAttributes.*, globalAttributes.*, existingAttributes.*, newAttributes.*)\",\n    ];\n  }\n\n  _initOpenObject(key, value, secondary, config) {\n    return {\n      attribute: key,\n      value: value,\n      closed: false,\n      domain: computeStateDomain(this.entity),\n      secondary: secondary,\n      description: key,\n      ...config,\n    };\n  }\n\n  loadEntity(entity) {\n    this.entity = entity;\n    return this.hass\n      .callApi(\"GET\", \"config/customize/config/\" + entity.entity_id)\n      .then((data) => {\n        this.localConfig = data.local;\n        this.globalConfig = data.global;\n        this.newAttributes = [];\n      });\n  }\n\n  saveEntity() {\n    const data = {};\n    const attrs = this.localAttributes.concat(\n      this.globalAttributes,\n      this.existingAttributes,\n      this.newAttributes\n    );\n    attrs.forEach((attr) => {\n      if (attr.closed || attr.secondary || !attr.attribute || !attr.value)\n        return;\n      const value = attr.type === \"json\" ? JSON.parse(attr.value) : attr.value;\n      if (!value) return;\n      data[attr.attribute] = value;\n    });\n\n    const objectId = this.entity.entity_id;\n    return this.hass.callApi(\n      \"POST\",\n      \"config/customize/config/\" + objectId,\n      data\n    );\n  }\n\n  _computeSingleAttribute(key, value, secondary) {\n    const config = hassAttributeUtil.LOGIC_STATE_ATTRIBUTES[key] || {\n      type: hassAttributeUtil.UNKNOWN_TYPE,\n    };\n    return this._initOpenObject(\n      key,\n      config.type === \"json\" ? JSON.stringify(value) : value,\n      secondary,\n      config\n    );\n  }\n\n  _computeAttributes(config, keys, secondary) {\n    return keys.map((key) =>\n      this._computeSingleAttribute(key, config[key], secondary)\n    );\n  }\n\n  _computeDocumentationUrl(hass) {\n    return documentationUrl(\n      hass,\n      \"/docs/configuration/customizing-devices/#customization-using-the-ui\"\n    );\n  }\n\n  computeLocalAttributes(localConfig) {\n    if (!localConfig) return [];\n    const localKeys = Object.keys(localConfig);\n    const result = this._computeAttributes(localConfig, localKeys, false);\n    return result;\n  }\n\n  computeGlobalAttributes(localConfig, globalConfig) {\n    if (!localConfig || !globalConfig) return [];\n    const localKeys = Object.keys(localConfig);\n    const globalKeys = Object.keys(globalConfig).filter(\n      (key) => !localKeys.includes(key)\n    );\n    return this._computeAttributes(globalConfig, globalKeys, true);\n  }\n\n  computeExistingAttributes(localConfig, globalConfig, entity) {\n    if (!localConfig || !globalConfig || !entity) return [];\n    const localKeys = Object.keys(localConfig);\n    const globalKeys = Object.keys(globalConfig);\n    const entityKeys = Object.keys(entity.attributes).filter(\n      (key) => !localKeys.includes(key) && !globalKeys.includes(key)\n    );\n    return this._computeAttributes(entity.attributes, entityKeys, true);\n  }\n\n  computeShowWarning(localConfig, globalConfig) {\n    if (!localConfig || !globalConfig) return false;\n    return Object.keys(localConfig).some(\n      (key) =>\n        JSON.stringify(globalConfig[key]) !== JSON.stringify(localConfig[key])\n    );\n  }\n\n  filterFromAttributes(attributes) {\n    return (key) =>\n      !attributes ||\n      attributes.every((attr) => attr.attribute !== key || attr.closed);\n  }\n\n  getNewAttributesOptions(\n    localAttributes,\n    globalAttributes,\n    existingAttributes,\n    newAttributes\n  ) {\n    const knownKeys = Object.keys(hassAttributeUtil.LOGIC_STATE_ATTRIBUTES)\n      .filter((key) => {\n        const conf = hassAttributeUtil.LOGIC_STATE_ATTRIBUTES[key];\n        return (\n          conf &&\n          (!conf.domains ||\n            !this.entity ||\n            conf.domains.includes(computeStateDomain(this.entity)))\n        );\n      })\n      .filter(this.filterFromAttributes(localAttributes))\n      .filter(this.filterFromAttributes(globalAttributes))\n      .filter(this.filterFromAttributes(existingAttributes))\n      .filter(this.filterFromAttributes(newAttributes));\n    return knownKeys.sort().concat(\"Other\");\n  }\n\n  selectedNewAttributeObserver(selected) {\n    if (selected < 0) return;\n    const option = this.newAttributesOptions[selected];\n    if (selected === this.newAttributesOptions.length - 1) {\n      // The \"Other\" option.\n      const attr = this._initOpenObject(\"\", \"\", false /* secondary */, {\n        type: hassAttributeUtil.ADD_TYPE,\n      });\n      this.push(\"newAttributes\", attr);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    let result = this.localAttributes.findIndex(\n      (attr) => attr.attribute === option\n    );\n    if (result >= 0) {\n      this.set(\"localAttributes.\" + result + \".closed\", false);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    result = this.globalAttributes.findIndex(\n      (attr) => attr.attribute === option\n    );\n    if (result >= 0) {\n      this.set(\"globalAttributes.\" + result + \".closed\", false);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    result = this.existingAttributes.findIndex(\n      (attr) => attr.attribute === option\n    );\n    if (result >= 0) {\n      this.set(\"existingAttributes.\" + result + \".closed\", false);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    result = this.newAttributes.findIndex((attr) => attr.attribute === option);\n    if (result >= 0) {\n      this.set(\"newAttributes.\" + result + \".closed\", false);\n      this.selectedNewAttribute = -1;\n      return;\n    }\n    const attr = this._computeSingleAttribute(\n      option,\n      \"\",\n      false /* secondary */\n    );\n    this.push(\"newAttributes\", attr);\n    this.selectedNewAttribute = -1;\n  }\n\n  attributesObserver() {\n    this.hasLocalAttributes =\n      this.localAttributes && this.localAttributes.some((attr) => !attr.closed);\n    this.hasGlobalAttributes =\n      this.globalAttributes &&\n      this.globalAttributes.some((attr) => !attr.closed);\n    this.hasExistingAttributes =\n      this.existingAttributes &&\n      this.existingAttributes.some((attr) => !attr.closed);\n    this.hasNewAttributes =\n      this.newAttributes && this.newAttributes.some((attr) => !attr.closed);\n    this.newAttributesOptions = this.getNewAttributesOptions(\n      this.localAttributes,\n      this.globalAttributes,\n      this.existingAttributes,\n      this.newAttributes\n    );\n  }\n}\ncustomElements.define(\"ha-form-customize\", HaFormCustomize);\n","import \"@polymer/paper-dropdown-menu/paper-dropdown-menu\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-listbox/paper-listbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport { EventsMixin } from \"../../../../mixins/events-mixin\";\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCustomizeArray extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        paper-dropdown-menu {\n          margin: -9px 0;\n        }\n      </style>\n      <paper-dropdown-menu\n        label=\"[[item.description]]\"\n        disabled=\"[[item.secondary]]\"\n        selected-item-label=\"{{item.value}}\"\n        dynamic-align=\"\"\n      >\n        <paper-listbox\n          slot=\"dropdown-content\"\n          selected=\"[[computeSelected(item)]]\"\n        >\n          <template is=\"dom-repeat\" items=\"[[getOptions(item)]]\" as=\"option\">\n            <paper-item>[[option]]</paper-item>\n          </template>\n        </paper-listbox>\n      </paper-dropdown-menu>\n    `;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      },\n    };\n  }\n\n  getOptions(item) {\n    const domain = item.domain || \"*\";\n    const options = item.options[domain] || item.options[\"*\"];\n    if (!options) {\n      this.item.type = \"string\";\n      this.fire(\"item-changed\");\n      return [];\n    }\n    return options.sort();\n  }\n\n  computeSelected(item) {\n    const options = this.getOptions(item);\n    return options.indexOf(item.value);\n  }\n}\ncustomElements.define(\"ha-customize-array\", HaCustomizeArray);\n","import \"@polymer/paper-checkbox/paper-checkbox\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nclass HaCustomizeBoolean extends PolymerElement {\n  static get template() {\n    return html`\n      <paper-checkbox disabled=\"[[item.secondary]]\" checked=\"{{item.value}}\">\n        [[item.description]]\n      </paper-checkbox>\n    `;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      },\n    };\n  }\n}\ncustomElements.define(\"ha-customize-boolean\", HaCustomizeBoolean);\n","import \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport \"../../../../components/ha-icon\";\n\nclass HaCustomizeIcon extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          @apply --layout-horizontal;\n        }\n        .icon-image {\n          border: 1px solid grey;\n          padding: 8px;\n          margin-right: 20px;\n          margin-top: 10px;\n        }\n      </style>\n      <ha-icon class=\"icon-image\" icon=\"[[item.value]]\"></ha-icon>\n      <paper-input\n        disabled=\"[[item.secondary]]\"\n        label=\"Icon\"\n        value=\"{{item.value}}\"\n      >\n      </paper-input>\n    `;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      },\n    };\n  }\n}\ncustomElements.define(\"ha-customize-icon\", HaCustomizeIcon);\n","import \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nclass HaCustomizeKeyValue extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          @apply --layout-horizontal;\n        }\n        paper-input {\n          @apply --layout-flex;\n        }\n        .key {\n          padding-right: 20px;\n        }\n      </style>\n      <paper-input\n        disabled=\"[[item.secondary]]\"\n        class=\"key\"\n        label=\"Attribute name\"\n        value=\"{{item.attribute}}\"\n      >\n      </paper-input>\n      <paper-input\n        disabled=\"[[item.secondary]]\"\n        label=\"Attribute value\"\n        value=\"{{item.value}}\"\n      >\n      </paper-input>\n    `;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      },\n    };\n  }\n}\ncustomElements.define(\"ha-customize-key-value\", HaCustomizeKeyValue);\n","import \"@polymer/paper-input/paper-input\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\n/* eslint-plugin-disable lit */\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\nimport { formatAttributeName } from \"../../../../util/hass-attributes-util\";\n\nclass HaCustomizeString extends PolymerElement {\n  static get template() {\n    return html`\n      <paper-input\n        disabled=\"[[item.secondary]]\"\n        label=\"[[getLabel(item)]]\"\n        value=\"{{item.value}}\"\n      >\n      </paper-input>\n    `;\n  }\n\n  static get properties() {\n    return {\n      item: {\n        type: Object,\n        notifies: true,\n      },\n    };\n  }\n\n  getLabel(item) {\n    return (\n      formatAttributeName(item.description) +\n      (item.type === \"json\" ? \" (JSON formatted)\" : \"\")\n    );\n  }\n}\ncustomElements.define(\"ha-customize-string\", HaCustomizeString);\n","import { css, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\n\n@customElement(\"ha-config-section\")\nexport class HaConfigSection extends LitElement {\n  @property() public isWide = false;\n\n  @property({ type: Boolean }) public vertical = false;\n\n  protected render() {\n    return html`\n      <div\n        class=\"content ${classMap({\n          narrow: !this.isWide,\n        })}\"\n      >\n        <div class=\"header\"><slot name=\"header\"></slot></div>\n        <div\n          class=\"together layout ${classMap({\n            narrow: !this.isWide,\n            vertical: this.vertical || !this.isWide,\n            horizontal: !this.vertical && this.isWide,\n          })}\"\n        >\n          <div class=\"intro\"><slot name=\"introduction\"></slot></div>\n          <div class=\"panel flex-auto\"><slot></slot></div>\n        </div>\n      </div>\n    `;\n  }\n\n  static get styles() {\n    return css`\n      :host {\n        display: block;\n      }\n      .content {\n        padding: 28px 20px 0;\n        max-width: 1040px;\n        margin: 0 auto;\n      }\n\n      .layout {\n        display: flex;\n      }\n\n      .horizontal {\n        flex-direction: row;\n      }\n\n      .vertical {\n        flex-direction: column;\n      }\n\n      .flex-auto {\n        flex: 1 1 auto;\n      }\n\n      .header {\n        font-family: var(--paper-font-headline_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-headline_-_-webkit-font-smoothing\n        );\n        font-size: var(--paper-font-headline_-_font-size);\n        font-weight: var(--paper-font-headline_-_font-weight);\n        letter-spacing: var(--paper-font-headline_-_letter-spacing);\n        line-height: var(--paper-font-headline_-_line-height);\n        opacity: var(--dark-primary-opacity);\n      }\n\n      .together {\n        margin-top: 32px;\n      }\n\n      .intro {\n        font-family: var(--paper-font-subhead_-_font-family);\n        -webkit-font-smoothing: var(\n          --paper-font-subhead_-_-webkit-font-smoothing\n        );\n        font-weight: var(--paper-font-subhead_-_font-weight);\n        line-height: var(--paper-font-subhead_-_line-height);\n        width: 100%;\n        opacity: var(--dark-primary-opacity);\n        font-size: 14px;\n        padding-bottom: 20px;\n      }\n\n      .horizontal .intro {\n        max-width: 400px;\n        margin-right: 40px;\n      }\n\n      .panel {\n        margin-top: -24px;\n      }\n\n      .panel ::slotted(*) {\n        margin-top: 24px;\n        display: block;\n      }\n\n      .narrow.content {\n        max-width: 640px;\n      }\n      .narrow .together {\n        margin-top: 20px;\n      }\n      .narrow .intro {\n        padding-bottom: 20px;\n        margin-right: 0;\n        max-width: 500px;\n      }\n    `;\n  }\n}\n","import \"@material/mwc-button\";\nimport {\n  css,\n  CSSResultGroup,\n  html,\n  LitElement,\n  PropertyValues,\n  TemplateResult,\n} from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport \"../../components/buttons/ha-progress-button\";\nimport \"../../components/entity/ha-entity-picker\";\nimport \"../../components/ha-card\";\nimport \"../../components/ha-circular-progress\";\nimport { haStyle } from \"../../resources/styles\";\nimport \"../../styles/polymer-ha-style\";\nimport type { HomeAssistant } from \"../../types\";\nimport { HaFormCustomize } from \"./customize/ha-form-customize\";\n\n@customElement(\"ha-entity-config\")\nexport class HaEntityConfig extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public selectedEntityId!: string;\n\n  // False if no entity is selected or currently saving or loading\n  @property() private _formEditState = false;\n\n  @query(\"#form\") private _form!: HaFormCustomize;\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-card>\n        <div class=\"card-content\">\n          <ha-entity-picker\n            .hass=${this.hass}\n            .value=${this.selectedEntityId}\n            .configValue=${\"entity\"}\n            @change=${this._selectedEntityChanged}\n            allow-custom-entity\n            hideClearIcon\n          >\n          </ha-entity-picker>\n\n          <div class=\"form-container\">\n            <ha-form-customize .hass=${this.hass} .id=${\"form\"}>\n            </ha-form-customize>\n          </div>\n        </div>\n        <div class=\"card-actions\">\n          <ha-progress-button\n            @click=${this._saveEntity}\n            .disabled=${!this._formEditState}\n          >\n            ${this.hass.localize(\"ui.common.save\")}\n          </ha-progress-button>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues) {\n    super.updated(changedProps);\n    if (\n      changedProps.has(\"selectedEntityId\") &&\n      changedProps.get(\"selectedEntityId\") !== this.selectedEntityId\n    ) {\n      this._selectEntity(this.selectedEntityId);\n      this.requestUpdate();\n    }\n  }\n\n  private _selectedEntityChanged(ev) {\n    this._selectEntity(ev.target.value);\n  }\n\n  private async _selectEntity(entityId?: string) {\n    if (!this._form || !entityId) return;\n    const entity = this.hass.states[entityId];\n    if (!entity) return;\n\n    this._formEditState = false;\n    await this._form.loadEntity(entity);\n    this._formEditState = true;\n  }\n\n  private async _saveEntity(ev) {\n    if (!this._formEditState) return;\n    this._formEditState = false;\n    const button = ev.target;\n    button.progress = true;\n\n    try {\n      await this._form.saveEntity();\n      this._formEditState = true;\n      button.actionSuccess();\n    } catch {\n      button.actionError();\n    } finally {\n      button.progress = false;\n    }\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        ha-card {\n          direction: ltr;\n        }\n\n        .form-placeholder {\n          height: 96px;\n        }\n\n        .hidden {\n          display: none;\n        }\n      `,\n    ];\n  }\n}\n","import { html, TemplateResult } from \"lit\";\nimport { until } from \"lit/directives/until\";\nimport checkValidDate from \"../common/datetime/check_valid_date\";\nimport { formatDate } from \"../common/datetime/format_date\";\nimport { formatDateTimeWithSeconds } from \"../common/datetime/format_date_time\";\nimport { capitalizeFirstLetter } from \"../common/string/capitalize-first-letter\";\nimport { isDate } from \"../common/string/is_date\";\nimport { isTimestamp } from \"../common/string/is_timestamp\";\nimport { HomeAssistant } from \"../types\";\n\nlet jsYamlPromise: Promise<typeof import(\"../resources/js-yaml-dump\")>;\n\nconst hassAttributeUtil = {\n  DOMAIN_DEVICE_CLASS: {\n    binary_sensor: [\n      \"battery\",\n      \"cold\",\n      \"connectivity\",\n      \"door\",\n      \"garage_door\",\n      \"gas\",\n      \"heat\",\n      \"light\",\n      \"lock\",\n      \"moisture\",\n      \"motion\",\n      \"moving\",\n      \"occupancy\",\n      \"opening\",\n      \"plug\",\n      \"power\",\n      \"presence\",\n      \"problem\",\n      \"safety\",\n      \"smoke\",\n      \"sound\",\n      \"vibration\",\n      \"window\",\n    ],\n    cover: [\n      \"awning\",\n      \"blind\",\n      \"curtain\",\n      \"damper\",\n      \"door\",\n      \"garage\",\n      \"gate\",\n      \"shade\",\n      \"shutter\",\n      \"window\",\n    ],\n    humidifier: [\"dehumidifier\", \"humidifier\"],\n    sensor: [\n      \"aqi\",\n      \"battery\",\n      \"carbon_dioxide\",\n      \"carbon_monoxide\",\n      \"current\",\n      \"date\",\n      \"energy\",\n      \"gas\",\n      \"humidity\",\n      \"illuminance\",\n      \"monetary\",\n      \"nitrogen_dioxide\",\n      \"nitrogen_monoxide\",\n      \"nitrous_oxide\",\n      \"ozone\",\n      \"pm1\",\n      \"pm10\",\n      \"pm25\",\n      \"power\",\n      \"power_factor\",\n      \"pressure\",\n      \"signal_strength\",\n      \"sulphur_dioxide\",\n      \"temperature\",\n      \"timestamp\",\n      \"volatile_organic_compounds\",\n      \"voltage\",\n    ],\n    switch: [\"switch\", \"outlet\"],\n  },\n  UNKNOWN_TYPE: \"json\",\n  ADD_TYPE: \"key-value\",\n  TYPE_TO_TAG: {\n    string: \"ha-customize-string\",\n    json: \"ha-customize-string\",\n    icon: \"ha-customize-icon\",\n    boolean: \"ha-customize-boolean\",\n    array: \"ha-customize-array\",\n    \"key-value\": \"ha-customize-key-value\",\n  },\n  LOGIC_STATE_ATTRIBUTES: {},\n};\n\n// Attributes here serve dual purpose:\n// 1) Any key of this object won't be shown in more-info window.\n// 2) Any key which has value other than undefined will appear in customization\n//    config according to its value.\nhassAttributeUtil.LOGIC_STATE_ATTRIBUTES = {\n  entity_picture: undefined,\n  friendly_name: { type: \"string\", description: \"Name\" },\n  icon: { type: \"icon\" },\n  emulated_hue: {\n    type: \"boolean\",\n    domains: [\"emulated_hue\"],\n  },\n  emulated_hue_name: {\n    type: \"string\",\n    domains: [\"emulated_hue\"],\n  },\n  haaska_hidden: undefined,\n  haaska_name: undefined,\n  supported_features: undefined,\n  attribution: undefined,\n  restored: undefined,\n  editable: undefined,\n  custom_ui_more_info: { type: \"string\" },\n  custom_ui_state_card: { type: \"string\" },\n  device_class: {\n    type: \"array\",\n    options: hassAttributeUtil.DOMAIN_DEVICE_CLASS,\n    description: \"Device class\",\n    domains: [\"binary_sensor\", \"cover\", \"humidifier\", \"sensor\", \"switch\"],\n  },\n  state_class: {\n    type: \"array\",\n    options: { sensor: [\"measurement\", \"total\", \"total_increasing\"] },\n    description: \"State class\",\n    domains: [\"sensor\"],\n  },\n  last_reset: undefined,\n  assumed_state: {\n    type: \"boolean\",\n    domains: [\n      \"switch\",\n      \"light\",\n      \"cover\",\n      \"climate\",\n      \"fan\",\n      \"humidifier\",\n      \"group\",\n      \"water_heater\",\n    ],\n  },\n  initial_state: {\n    type: \"string\",\n    domains: [\"automation\"],\n  },\n  unit_of_measurement: { type: \"string\" },\n};\n\nexport default hassAttributeUtil;\n\n// Convert from internal snake_case format to user-friendly format\nexport function formatAttributeName(value: string): string {\n  value = value\n    .replace(/_/g, \" \")\n    .replace(/\\bid\\b/g, \"ID\")\n    .replace(/\\bip\\b/g, \"IP\")\n    .replace(/\\bmac\\b/g, \"MAC\")\n    .replace(/\\bgps\\b/g, \"GPS\");\n  return capitalizeFirstLetter(value);\n}\n\nexport function formatAttributeValue(\n  hass: HomeAssistant,\n  value: any\n): string | TemplateResult {\n  if (value === null) {\n    return \"-\";\n  }\n\n  // YAML handling\n  if (\n    (Array.isArray(value) && value.some((val) => val instanceof Object)) ||\n    (!Array.isArray(value) && value instanceof Object)\n  ) {\n    if (!jsYamlPromise) {\n      jsYamlPromise = import(\"../resources/js-yaml-dump\");\n    }\n    const yaml = jsYamlPromise.then((jsYaml) => jsYaml.dump(value));\n    return html`<pre>${until(yaml, \"\")}</pre>`;\n  }\n\n  if (typeof value === \"string\") {\n    // URL handling\n    if (value.startsWith(\"http\")) {\n      try {\n        // If invalid URL, exception will be raised\n        const url = new URL(value);\n        if (url.protocol === \"http:\" || url.protocol === \"https:\")\n          return html`<a target=\"_blank\" rel=\"noreferrer\" href=${value}\n            >${value}</a\n          >`;\n      } catch (_) {\n        // Nothing to do here\n      }\n    }\n\n    // Date handling\n    if (isDate(value, true)) {\n      // Timestamp handling\n      if (isTimestamp(value)) {\n        const date = new Date(value);\n        if (checkValidDate(date)) {\n          return formatDateTimeWithSeconds(date, hass.locale);\n        }\n      }\n\n      // Value was not a timestamp, so only do date formatting\n      const date = new Date(value);\n      if (checkValidDate(date)) {\n        return formatDate(date, hass.locale);\n      }\n    }\n  }\n\n  return Array.isArray(value) ? value.join(\", \") : value;\n}\n"],"names":[],"sourceRoot":""}