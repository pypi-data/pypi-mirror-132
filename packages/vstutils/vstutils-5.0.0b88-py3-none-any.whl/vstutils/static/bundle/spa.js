window.spa=function(e){function t(t){for(var o,r,a=t[0],l=t[1],f=t[2],u=0,d=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(c&&c(t);d.length;)d.shift()();return i.push.apply(i,f||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var l=n[a];0!==s[l]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},s={5:0},i=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/static/bundle/";var a=window.webpackJsonp_name_=window.webpackJsonp_name_||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var f=0;f<a.length;f++)t(a[f]);var c=l;return i.push([354,0,2,4,1]),n()}({258:function(e,t,n){var o=n(4),s=n(259);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);var i={insert:"head",singleton:!1};o(s,i);e.exports=s.locals||{}},259:function(e,t,n){(t=n(5)(!1)).push([e.i,".ansi-black-fg{color:#000000}.ansi-red-fg{color:#ff6060}.ansi-green-fg{color:#60ff60}.ansi-yellow-fg{color:#ffff36}.ansi-blue-fg{color:#6060ff}.ansi-magenta-fg{color:#ff36ff}.ansi-cyan-fg{color:#36ffff}.ansi-white-fg{color:#ececec}.ansi-bright-black-fg{color:#363636}.ansi-bright-red-fg{color:#ff8080}.ansi-bright-green-fg{color:#80ff80}.ansi-bright-yellow-fg{color:#ffff80}.ansi-bright-blue-fg{color:#8080ff}.ansi-bright-magenta-fg{color:#ff80ff}.ansi-bright-cyan-fg{color:#80ffff}.ansi-bright-white-fg{color:#ffffff}.ansi-black-bg{background-color:#000000}.ansi-red-bg{background-color:#ff6060}.ansi-green-bg{background-color:#60ff60}.ansi-yellow-bg{background-color:#ffff36}.ansi-blue-bg{background-color:#6060ff}.ansi-magenta-bg{background-color:#ff36ff}.ansi-cyan-bg{background-color:#36ffff}.ansi-white-bg{background-color:#ececec}.ansi-bright-black-bg{background-color:#363636}.ansi-bright-red-bg{background-color:#ff8080}.ansi-bright-green-bg{background-color:#80ff80}.ansi-bright-yellow-bg{background-color:#ffff80}.ansi-bright-blue-bg{background-color:#8080ff}.ansi-bright-magenta-bg{background-color:#ff80ff}.ansi-bright-cyan-bg{background-color:#80ffff}.ansi-bright-white-bg{background-color:#ffffff}\n",""]),e.exports=t},354:function(e,t,n){"use strict";n.r(t),n.d(t,"APP_CREATED",(function(){return R.a})),n.d(t,"TabSignal",(function(){return y.a})),n.d(t,"signals",(function(){return R.b})),n.d(t,"colors",(function(){return o})),n.d(t,"ComponentsRegistrator",(function(){return l.a})),n.d(t,"globalComponentsRegistrator",(function(){return l.b})),n.d(t,"AppRoot",(function(){return u.a})),n.d(t,"utils",(function(){return c})),n.d(t,"setupVue",(function(){return D})),n.d(t,"autoupdate",(function(){return I})),n.d(t,"popUp",(function(){return f})),n.d(t,"fields",(function(){return U})),n.d(t,"components",(function(){return q})),n.d(t,"models",(function(){return b})),n.d(t,"querySet",(function(){return m})),n.d(t,"views",(function(){return p})),n.d(t,"store",(function(){return g})),n.d(t,"router",(function(){return w})),n.d(t,"api",(function(){return a})),n.d(t,"users",(function(){return Q})),n.d(t,"App",(function(){return $}));var o={};n.r(o),n.d(o,"AnsiUp",(function(){return F.a})),n.d(o,"ansiToHTML",(function(){return E}));var s=n(9),i=n(162),r=n.n(i),a=n(12),l=n(11),f=n(6),c=n(0),u=n(60),d=n(163),h=n(24);var p=n(37),g=n(30),b=n(23),w=n(58),m=n(41),v=n(66),y=n.n(v),R=n(8),C=(n(15),n(232),n(233),n(235),n(237),n(87),n(13)),k=n.n(C),_=(n(241),n(83)),M=n.n(_),T=n(82),S=n.n(T),j=n(14),x=(n(242),n(64)),A=n.n(x),O=(n(244),n(84)),V=n.n(O),P=(n(88),n(89),n(92)),F=n.n(P);n(258);const L=new F.a;function E(e){return L.ansi_to_html(e).replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")}L.use_classes=!0;var I=n(21),D=n(125),U=n(59),q=n(160),Q=n(161);n(159),n(343),n(345);window.SELECT2_THEME="bootstrap",n(238),n(239),window.moment=k.a,window.md5=M.a,window.Visibility=S.a,window.IMask=j.a,window.iziToast=A.a,window.autoComplete=V.a;class $ extends class{constructor(e,t){this.config=e,this.schema=e.schema,this.router=null,this.cache=t,this.i18n=h.a,this.api=a.apiConnector.initConfiguration(e),this.translationsManager=new d.a(a.apiConnector,t),this.centrifugoClient=function(e,t){if(!e)return null;const n=new r.a(new URL("connection/websocket",e).toString());return t&&n.setToken(t),n}(this.schema.info["x-centrifugo-address"],this.schema.info["x-centrifugo-token"]),this.error_handler=new f.ErrorHandler,this.languages=null,this.rawUser=null,this.user=null,this.global_components=l.b,this.appRootComponent=u.a}afterInitialDataBeforeMount(){}loadSettings(){return this.store.dispatch("userSettings/load")}async start(){this.centrifugoClient&&this.centrifugoClient.connect();const[e,t,n]=await Promise.all([this.translationsManager.getLanguages(),this.translationsManager.getTranslations(this.i18n.locale),this.api.loadUser(),this.loadSettings()]);this.languages=e,this.i18n.messages[this.i18n.locale]=t,this.rawUser=n,this.setLanguage(this.i18n.locale),this.afterInitialDataBeforeMount();const o=this.views.get("/user/").objects,s=o.getModelClass(c.RequestTypes.RETRIEVE);this.user=new s(this.rawUser,o),this.global_components.registerAll(),this.prepare()}changeAppRootComponent(e){this.appRootComponent=e}resetAppRootComponent(){this.appRootComponent=u.a}prepare(){}}{constructor(e,t){super(e,t),this.fieldsResolver=new U.FieldsResolver(this.config.schema),Object(U.addDefaultFields)(this.fieldsResolver),this.modelsResolver=new b.ModelsResolver(this.fieldsResolver,this.config.schema),this.views=null,this.qsResolver=null;let n=new g.StoreConstructor(this,this.config.isDebug);R.b.emit("app.beforeInitStore",{storeConstructor:n}),this.store=n.getStore(),this.application=null,R.b.emit(R.a,this)}smartTranslate(e){if(null==e)return"";if(e=String(e),this.i18n.te(e))return this.i18n.t(e);const t=e.toLowerCase();return this.i18n.te(t)?Object(c.capitalize)(this.i18n.t(t)):e}getCurrentViewPath(){var e,t,n,o;return null===(e=this.application)||void 0===e||null===(t=e.$refs)||void 0===t||null===(n=t.currentViewComponent)||void 0===n||null===(o=n.view)||void 0===o?void 0:o.path}afterInitialDataBeforeMount(){this.prepareFieldsClasses(),this.generateDefinitionsModels(),this.views=new p.ViewConstructor(a.openapi_dictionary,this.modelsResolver,this.fieldsResolver).generateViews(this.config.schema),this.viewsTree=new p.ViewsTree(this.views),this.qsResolver=new m.QuerySetsResolver(this.viewsTree),this.setNestedViewsQuerysets()}generateDefinitionsModels(){for(const e of Object.keys(this.config.schema.definitions))this.modelsResolver.byReferencePath("#/definitions/".concat(e));R.b.emit("allModels.created",{models:this.modelsResolver._definitionsModels})}prepareFieldsClasses(){for(const e of this.fieldsResolver.allFieldsClasses())e.app=this}prepareViewsModelsFields(){for(const[e,t]of this.views){const n=new Set;if(t.objects)for(const e of Object.values(t.objects.models))if(Array.isArray(e))for(const t of e)n.add(t);else n.add(e);if(t.modelsList)for(const e of t.modelsList)e&&n.add(e);for(const t of n)if(t)for(const n of t.fields.values())n.prepareFieldForView(e);if(t.filters)for(const n of Object.values(t.filters))n.prepareFieldForView(e)}}setNestedViewsQuerysets(){for(const e of this.views.values())if(e instanceof p.PageNewView&&e.nestedAllowAppend){const t=e.listView,n=t.objects.getResponseModelClass(c.RequestTypes.LIST).name;try{t.nestedQueryset=this.qsResolver.findQuerySetForNested(n,t.path)}catch(n){console.warn(n),e.nestedAllowAppend=!1,t.actions.delete("add")}}}setLanguage(e){return this._prefetchTranslation(e).then(()=>(this.i18n.locale=e,c.guiLocalSettings.set("lang",e),R.b.emit("app.language.changed",{lang:e}),document.documentElement.setAttribute("lang",e),document.cookie="lang=".concat(e),e))}_prefetchTranslation(e){return this.languages.find(t=>t.code===e)?this.translationsManager.getTranslations(e).then(t=>this.i18n.setLocaleMessage(e,t)):Promise.reject(!1)}prepare(){R.b.emit("app.beforeInit",{app:this}),this.prepareViewsModelsFields();let e=new w.RouterConstructor(this.views,w.mixins.routesComponentsTemplates,w.mixins.customRoutesComponentsTemplates);R.b.emit("app.beforeInitRouter",{routerConstructor:e}),this.router=e.getRouter(),s.default.prototype.$app=this,s.default.prototype.$u=c,s.default.prototype.$st=this.smartTranslate.bind(this),this.application=new s.default({mixins:[this.appRootComponent],propsData:{info:this.config.schema.info,x_menu:this.config.schema.info["x-menu"],x_docs:this.config.schema.info["x-docs"]},router:this.router,store:this.store,i18n:this.i18n}),R.b.emit("app.afterInit",{app:this})}mount(){this.application.$mount("#RealBody")}}window.App=$}});