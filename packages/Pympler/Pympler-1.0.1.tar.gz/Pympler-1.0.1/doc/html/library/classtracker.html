
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pympler.classtracker &#8212; Pympler 1.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="pympler.classtracker_stats" href="classtracker_stats.html" />
    <link rel="prev" title="pympler.asizeof" href="asizeof.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="classtracker_stats.html" title="pympler.classtracker_stats"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="asizeof.html" title="pympler.asizeof"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Pympler 1.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../detailed_toc.html" >Sitemap</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="library.html" accesskey="U">Library</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">pympler.classtracker</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-pympler.classtracker">
<span id="pympler-classtracker"></span><span id="lib-tracker-classes"></span><h1>pympler.classtracker<a class="headerlink" href="#module-pympler.classtracker" title="Permalink to this headline">¶</a></h1>
<p>The <cite>ClassTracker</cite> is a facility delivering insight into the memory
distribution of a Python program. It can introspect memory consumption of
certain classes and objects. Facilities are provided to track and size
individual objects or all instances of certain classes. Tracked objects are
sized recursively to provide an overview of memory distribution between the
different tracked objects.</p>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pympler.classtracker.ClassTracker">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">pympler.classtracker.</span></span><span class="sig-name descname"><span class="pre">ClassTracker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">IO</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pympler.classtracker.ClassTracker" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="pympler.classtracker.ClassTracker.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#pympler.classtracker.ClassTracker.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear all gathered data and detach from all tracked objects/classes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pympler.classtracker.ClassTracker.create_snapshot">
<span class="sig-name descname"><span class="pre">create_snapshot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compute_total</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#pympler.classtracker.ClassTracker.create_snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect current per instance statistics and saves total amount of
memory associated with the Python process.</p>
<p>If <cite>compute_total</cite> is <cite>True</cite>, the total consumption of all objects
known to <em>asizeof</em> is computed. The latter might be very slow if many
objects are mapped into memory at the time the snapshot is taken.
Therefore, <cite>compute_total</cite> is set to <cite>False</cite> by default.</p>
<p>The overhead of the <cite>ClassTracker</cite> structure is also computed.</p>
<p>Snapshots can be taken asynchronously. The function is protected with a
lock to prevent race conditions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pympler.classtracker.ClassTracker.detach_all">
<span class="sig-name descname"><span class="pre">detach_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#pympler.classtracker.ClassTracker.detach_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Detach from all tracked classes and objects.
Restore the original constructors and cleanse the tracking lists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pympler.classtracker.ClassTracker.detach_all_classes">
<span class="sig-name descname"><span class="pre">detach_all_classes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#pympler.classtracker.ClassTracker.detach_all_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Detach from all tracked classes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pympler.classtracker.ClassTracker.detach_class">
<span class="sig-name descname"><span class="pre">detach_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">type</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#pympler.classtracker.ClassTracker.detach_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop tracking class ‘cls’. Any new objects of that type are not
tracked anymore. Existing objects are still tracked.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pympler.classtracker.ClassTracker.start_periodic_snapshots">
<span class="sig-name descname"><span class="pre">start_periodic_snapshots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interval</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#pympler.classtracker.ClassTracker.start_periodic_snapshots" title="Permalink to this definition">¶</a></dt>
<dd><p>Start a thread which takes snapshots periodically. The <cite>interval</cite>
specifies the time in seconds the thread waits between taking
snapshots. The thread is started as a daemon allowing the program to
exit. If periodic snapshots are already active, the interval is
updated.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pympler.classtracker.ClassTracker.stop_periodic_snapshots">
<span class="sig-name descname"><span class="pre">stop_periodic_snapshots</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#pympler.classtracker.ClassTracker.stop_periodic_snapshots" title="Permalink to this definition">¶</a></dt>
<dd><p>Post a stop signal to the thread that takes the periodic snapshots. The
function waits for the thread to terminate which can take some time
depending on the configured interval.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pympler.classtracker.ClassTracker.track_class">
<span class="sig-name descname"><span class="pre">track_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution_level</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#pympler.classtracker.ClassTracker.track_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Track all objects of the class <cite>cls</cite>. Objects of that type that already
exist are <em>not</em> tracked. If <cite>track_class</cite> is called for a class already
tracked, the tracking parameters are modified. Instantiation traces can
be generated by setting <cite>trace</cite> to True.
A constructor is injected to begin instance tracking on creation
of the object. The constructor calls <cite>track_object</cite> internally.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cls</strong> – class to be tracked, may be an old-style or a new-style
class</p></li>
<li><p><strong>name</strong> – reference the class by a name, default is the
concatenation of module and class name</p></li>
<li><p><strong>resolution_level</strong> – The recursion depth up to which referents are
sized individually. Resolution level 0 (default) treats the object
as an opaque entity, 1 sizes all direct referents individually, 2
also sizes the referents of the referents and so forth.</p></li>
<li><p><strong>keep</strong> – Prevent the object’s deletion by keeping a (strong)
reference to the object.</p></li>
<li><p><strong>trace</strong> – Save instantiation stack trace for each instance</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pympler.classtracker.ClassTracker.track_object">
<span class="sig-name descname"><span class="pre">track_object</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution_level</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#pympler.classtracker.ClassTracker.track_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Track object ‘instance’ and sample size and lifetime information.  Not
all objects can be tracked; trackable objects are class instances and
other objects that can be weakly referenced. When an object cannot be
tracked, a <cite>TypeError</cite> is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resolution_level</strong> – The recursion depth up to which referents are
sized individually. Resolution level 0 (default) treats the object
as an opaque entity, 1 sizes all direct referents individually, 2
also sizes the referents of the referents and so forth.</p></li>
<li><p><strong>keep</strong> – Prevent the object’s deletion by keeping a (strong)
reference to the object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pympler.classtracker</a><ul>
<li><a class="reference internal" href="#classes">Classes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="asizeof.html"
                        title="previous chapter">pympler.asizeof</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="classtracker_stats.html"
                        title="next chapter">pympler.classtracker_stats</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/library/classtracker.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="classtracker_stats.html" title="pympler.classtracker_stats"
             >next</a> |</li>
        <li class="right" >
          <a href="asizeof.html" title="pympler.asizeof"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Pympler 1.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../detailed_toc.html" >Sitemap</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="library.html" >Library</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">pympler.classtracker</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> .
      Last updated on Dec 22, 2021.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>