
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pympler.garbagegraph &#8212; Pympler 1.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="pympler.muppy" href="muppy.html" />
    <link rel="prev" title="pympler.classtracker_stats" href="classtracker_stats.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="muppy.html" title="pympler.muppy"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="classtracker_stats.html" title="pympler.classtracker_stats"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Pympler 1.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../detailed_toc.html" >Sitemap</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="library.html" accesskey="U">Library</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">pympler.garbagegraph</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pympler-garbagegraph">
<span id="garbage"></span><h1>pympler.garbagegraph<a class="headerlink" href="#pympler-garbagegraph" title="Permalink to this headline">¶</a></h1>
<p>Garbage occurs if objects refer too each other in a circular fashion. Such
reference cycles cannot be freed automatically and must be collected by the
garbage collector. While it is sometimes hard to avoid creating reference
cycles, preventing such cycles saves garbage collection time and limits the
lifetime of objects. Moreover, some objects cannot be collected by the garbage
collector.</p>
<p>Reference cycles can be visualized with the help of
<a class="reference external" href="http://www.graphviz.org">graphviz</a>.</p>
<span class="target" id="module-pympler.garbagegraph"></span><div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pympler.garbagegraph.GarbageGraph">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">pympler.garbagegraph.</span></span><span class="sig-name descname"><span class="pre">GarbageGraph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reduce</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collectable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pympler.garbagegraph.GarbageGraph" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">GarbageGraph</span></code> is a <code class="docutils literal notranslate"><span class="pre">ReferenceGraph</span></code> that illustrates the objects
building reference cycles. The garbage collector is switched to debug mode
(all identified garbage is stored in <cite>gc.garbage</cite>) and the garbage
collector is invoked. The collected objects are then illustrated in a
directed graph.</p>
<p>Large graphs can be reduced to the actual cycles by passing <code class="docutils literal notranslate"><span class="pre">reduce=True</span></code>
to the constructor.</p>
<p>It is recommended to disable the garbage collector when using the
<code class="docutils literal notranslate"><span class="pre">GarbageGraph</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pympler.garbagegraph</span> <span class="kn">import</span> <span class="n">GarbageGraph</span><span class="p">,</span> <span class="n">start_debug_garbage</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_debug_garbage</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">l</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gb</span> <span class="o">=</span> <span class="n">GarbageGraph</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gb</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;garbage.eps&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="pympler.garbagegraph.GarbageGraph.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reduce</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collectable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pympler.garbagegraph.GarbageGraph.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the GarbageGraph with the objects identified by the garbage
collector. If <cite>collectable</cite> is true, every reference cycle is recorded.
Otherwise only uncollectable objects are reported.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pympler.garbagegraph.GarbageGraph.render">
<span class="sig-name descname"><span class="pre">render</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ps'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unflatten</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pympler.garbagegraph.GarbageGraph.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the graph to <cite>filename</cite> using graphviz. The graphviz invocation
command may be overridden by specifying <cite>cmd</cite>. The <cite>format</cite> may be any
specifier recognized by the graph renderer (‘-Txxx’ command).  The
graph can be preprocessed by the <em>unflatten</em> tool if the <cite>unflatten</cite>
parameter is True.  If there are no objects to illustrate, the method
does not invoke graphviz and returns False. If the renderer returns
successfully (return code 0), True is returned.</p>
<p>An <cite>OSError</cite> is raised if the graphviz tool cannot be found.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pympler.garbagegraph.GarbageGraph.split">
<span class="sig-name descname"><span class="pre">split</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pympler.garbagegraph.GarbageGraph.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Split the graph into sub-graphs. Only connected objects belong to the
same graph. <cite>split</cite> yields copies of the Graph object. Shallow copies
are used that only replicate the meta-information, but share the same
object list <code class="docutils literal notranslate"><span class="pre">self.objects</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pympler.refgraph</span> <span class="kn">import</span> <span class="n">ReferenceGraph</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;spam&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="n">b</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rg</span> <span class="o">=</span> <span class="n">ReferenceGraph</span><span class="p">([</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">t</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">subgraph</span> <span class="ow">in</span> <span class="n">rg</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
<span class="gp">... </span>  <span class="nb">print</span> <span class="p">(</span><span class="n">subgraph</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="go">0</span>
<span class="go">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pympler.garbagegraph.GarbageGraph.write_graph">
<span class="sig-name descname"><span class="pre">write_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pympler.garbagegraph.GarbageGraph.write_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Write raw graph data which can be post-processed using graphviz.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pympler.garbagegraph.GarbageGraph.print_stats">
<span class="sig-name descname"><span class="pre">print_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pympler.garbagegraph.GarbageGraph.print_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Log annotated garbage objects to console or file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>stream</strong> – open file, uses sys.stdout if not given</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pympler.garbagegraph.start_debug_garbage">
<span class="sig-prename descclassname"><span class="pre">pympler.garbagegraph.</span></span><span class="sig-name descname"><span class="pre">start_debug_garbage</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pympler.garbagegraph.start_debug_garbage" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn off garbage collector to analyze <em>collectable</em> reference cycles.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pympler.garbagegraph.end_debug_garbage">
<span class="sig-prename descclassname"><span class="pre">pympler.garbagegraph.</span></span><span class="sig-name descname"><span class="pre">end_debug_garbage</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pympler.garbagegraph.end_debug_garbage" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn garbage collection on and disable debug output.</p>
</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">pympler.garbagegraph</a><ul>
<li><a class="reference internal" href="#classes">Classes</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="classtracker_stats.html"
                        title="previous chapter">pympler.classtracker_stats</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="muppy.html"
                        title="next chapter">pympler.muppy</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/library/garbagegraph.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="muppy.html" title="pympler.muppy"
             >next</a> |</li>
        <li class="right" >
          <a href="classtracker_stats.html" title="pympler.classtracker_stats"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Pympler 1.0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../detailed_toc.html" >Sitemap</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="library.html" >Library</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">pympler.garbagegraph</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> .
      Last updated on Dec 22, 2021.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.2.0.
    </div>
  </body>
</html>