(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{BD01:function(e,t,a){e.exports={basic:"basic___1O9xU",advanced:"advanced___UNaWL",titleContainer:"titleContainer___2CZg5",main:"main___2FrQu",process:"process___1XMbQ",fileUpload:"fileUpload___1iSw4",tips:"tips___21rix",stepTitle:"stepTitle___3_Xk5",stepTips:"stepTips___1sOGr",bar:"bar___OY4o7",number:"number___WZgsz",type:"type___1tWtM",date:"date___8Amdf",text:"text___1Bznx",legend:"legend___2Gjk4",typeCir:"typeCir___1h6hF",dateCir:"dateCir___f_Df0",textCir:"textCir___2MrcD",symbol:"symbol___25pMe",comment:"comment___xsDhm",barWrapper:"barWrapper___1tppb",cvdata:"cvdata___1DrxP",numberCir:"numberCir___2Oi3i",goTrain:"goTrain___1n2Mb",cvdataCir:"cvdataCir___29l0B",testCir:"testCir___1wx2E",breadcrumbIndex:"breadcrumbIndex___2k1YX",labelTip:"labelTip___Pm8qq"}},YMUj:function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),r=(a("sPJy"),a("bE4q")),l=(a("7Kak"),a("9yH6")),i=(a("+L6B"),a("2/Rp")),o=(a("5NDa"),a("5rEg")),s=(a("y8nQ"),a("Vl3Y")),c=a("qIgq"),m=a.n(c),d=a("q1tI"),u=a.n(d),p=a("/MKj"),b=a("Ty5D"),f=a("X/SJ"),h=a("5ahD"),g=(a("14J3"),a("BMrR")),E=(a("giR+"),a("fyUT")),v=(a("jCWc"),a("kPKH")),_=(a("8dk+"),a("eZ87")),y=(a("OaEy"),a("2fM7")),O=a("LLXN"),j=a("Kvkj"),M=Object(d["memo"])(e=>{var t=e.labelType,a=e.labelData,n=e.style;null!==n&&void 0!==n||(n={width:500});var r={categorical:u.a.createElement("div",{style:n},u.a.createElement(j["f"],{data:a,updateWhenChange:!1})),continuous:u.a.createElement("div",{style:n},u.a.createElement(j["d"],{hData:a}))};return u.a.createElement(u.a.Fragment,null,r[t])}),S=M,x=a("BD01"),k=a.n(x),T=a("V6UL"),C=a("ygAv"),w=a("z6lB"),N=(a("RWK8"),a("7/+/")),D=y["a"].Option,P=[{name:"".concat(Object(O["formatMessage"])({id:"extra.trainUnion"})),count:80,color:"rgba(49, 154, 228, 1)"},{name:"".concat(Object(O["formatMessage"])({id:"extra.verifyUnion"})),count:10,color:"rgba(6, 194, 97, 1)"},{name:"".concat(Object(O["formatMessage"])({id:"extra.testUnion"})),count:10,color:"rgba(225, 67, 68, 1)"}],I=e=>{var t=e.train.labelName,a=e.dispatch,r=e.location.query.datasetName,o=["HyperGBM","DeepTables"],c=Object(d["useRef"])(),p=Object(d["useState"])("train_validation_holdout"),b=m()(p,2),f=b[0],h=b[1],M=Object(d["useState"])(null),x=m()(M,2),I=x[0],L=x[1],F=Object(d["useState"])(null),R=m()(F,2),A=R[0],U=R[1],z=Object(d["useState"])(""),q=m()(z,2),B=q[0],V=q[1],W=Object(d["useState"])(o[0]),H=m()(W,2),J=H[0],K=H[1],Y=Object(d["useState"])(t),X=m()(Y,2),Z=X[0],G=X[1],Q=Object(d["useState"])(""),$=m()(Q,2),ee=$[0],te=$[1],ae=Object(d["useState"])(""),ne=m()(ae,2),re=ne[0],le=ne[1],ie=Object(d["useState"])("quick"),oe=m()(ie,2),se=oe[0],ce=oe[1],me=Object(d["useState"])(5),de=m()(me,2),ue=de[0],pe=de[1],be=Object(d["useState"])(20),fe=m()(be,2),he=fe[0],ge=fe[1],Ee=Object(d["useState"])(9527),ve=m()(Ee,2),_e=ve[0],ye=ve[1],Oe=Object(d["useState"])(""),je=m()(Oe,2),Me=je[0],Se=je[1],xe=Object(d["useState"])(null),ke=m()(xe,2),Te=ke[0],Ce=ke[1],we=Object(d["useState"])(!1),Ne=m()(we,2),De=Ne[0],Pe=Ne[1],Ie=Object(d["useState"])(!1),Le=m()(Ie,2),Fe=Le[0],Re=Le[1],Ae=Object(d["useState"])(P),Ue=m()(Ae,2),ze=Ue[0],qe=Ue[1],Be=Object(d["useState"])([]),Ve=m()(Be,2),We=Ve[0],He=Ve[1],Je=(null===We||void 0===We?void 0:We.filter(e=>"continuous"===e.type||"categorical"===e.type))||[],Ke=(null===We||void 0===We?void 0:We.filter(e=>"datetime"===e.type))||[],Ye=(null===We||void 0===We?void 0:We.filter(e=>{if(e.type===N["FeatureType"].Categorical&&3===e.extension.value_count.length){var t=e.extension.value_count.map(e=>e.type);if(t.indexOf(N["PartitionClass"].Train)>-1&&t.indexOf(N["PartitionClass"].Eval)>-1&&t.indexOf(N["PartitionClass"].Test)>-1)return!0}return!1}))||[],Xe=Ye.length>0,Ze=Ke.length>0,Ge=s["a"].useForm(),Qe=m()(Ge,1),$e=Qe[0];Object(d["useEffect"])(()=>{Object(T["g"])(r).then(e=>{if(0===e.code){var t=e.data.features;t.length<=0?Object(w["a"])("Features of  "+r+" is empty"):(t.forEach((e,t)=>{if(e.key=t,"continuous"===e.type)e.hData=[],e.extension.bins.map(t=>{e.hData.push({value:[t.begin,t.end],count:t.value})});else if("datetime"===e.type){var a=["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"];e.barHourData=[];var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.barMonthData=[];var r=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];e.barWeekData=[],e.barYearData=[],e.extension.by_hour.forEach((t,n)=>{e.barHourData.push({time:a[n],value:t})}),e.extension.by_month.forEach((t,a)=>{e.barMonthData.push({time:n[a],value:t})}),e.extension.by_week.forEach((t,a)=>{e.barWeekData.push({time:r[a],value:t})}),e.extension.by_year.forEach((t,a)=>{e.barYearData.push({time:String(t["year"]),value:t["value"]})})}}),He(t),Object(T["k"])(r,Z).then(e=>{if(0===e.code){var a=e.data;if(G(a.conf.label_col),te(a.conf.pos_label),ce(a.conf.train_mode),K(a.conf.engine),h(a.conf.partition_strategy),a.conf.partition_strategy===N["PartitionStrategy"].Manual)Ce(a.conf.partition_col);else if(a.conf.partition_strategy===N["PartitionStrategy"].TrainValidationHoldout){P[0].count=a.conf.train_validation_holdout.train_percentage,P[1].count=a.conf.train_validation_holdout.validation_percentage,P[2].count=a.conf.train_validation_holdout.holdout_percentage,qe(P);var n=a.conf.train_validation_holdout.random_state;void 0!==n&&null!==n&&ye(a.conf.train_validation_holdout.random_state)}t.forEach(e=>{e.name===a.conf.label_col&&(U(e.extension.value_count),"continuous"===e.type?L(e.hData):"categorical"===e.type&&L(e.extension.value_count),V(e.type))}),Object(T["p"])(r,a.conf.label_col).then(e=>{var t=e.data;le(t.task_type)})}else Object(w["a"])("Response is: "+JSON.stringify(e))}))}else Object(w["a"])("Response is: "+JSON.stringify(e))})},[r,Z,t]);var et=e=>{Pe(!1),G(e)},tt=e=>{Ce(e)},at=e=>{isNaN(e)||pe(e)},nt=e=>{isNaN(e)||ge(e)},rt=u.a.createElement(u.a.Fragment,null,u.a.createElement(l["a"].Group,{onChange:e=>h(e.target.value),value:f,style:{marginTop:12}},u.a.createElement(l["a"],{value:N["PartitionStrategy"].TrainValidationHoldout},Object(O["formatMessage"])({id:"extra.testAndTrain"})))),lt=()=>{return f===N["PartitionStrategy"].CrossValidation?u.a.createElement(u.a.Fragment,null,u.a.createElement("dl",null,u.a.createElement("dt",null,Object(O["formatMessage"])({id:"train.divisionNum"}))),u.a.createElement(g["a"],null,u.a.createElement(v["a"],{span:12},u.a.createElement(_["a"],{min:2,max:50,onChange:at,value:"number"===typeof ue?ue:0,step:1,tooltipVisible:!1})),u.a.createElement(v["a"],{span:4},u.a.createElement(E["a"],{min:2,max:50,style:{margin:"0 16px"},step:1,value:ue,onChange:at}))),u.a.createElement("dl",null,u.a.createElement("dt",null,Object(O["formatMessage"])({id:"train.testUnionPercentage"}))),u.a.createElement(g["a"],null,u.a.createElement(v["a"],{span:12},u.a.createElement(_["a"],{min:10,max:80,onChange:nt,value:"number"===typeof he?he:0,step:1,tooltipVisible:!1})),u.a.createElement(v["a"],{span:4},u.a.createElement(E["a"],{min:10,max:80,style:{margin:"0 16px"},step:1,value:he,formatter:e=>"".concat(e,"%"),onChange:nt}))),u.a.createElement(g["a"],null,u.a.createElement(v["a"],{span:18},u.a.createElement("div",{className:k.a.barWrapper},u.a.createElement("div",{className:k.a.cvdata,style:{width:"".concat(100-he,"%"),overflow:"hidden"}},Array.apply(null,{length:ue}).map((e,t)=>{return u.a.createElement("span",{style:{flex:1,backgroundColor:"#0090DC",borderRight:"1px solid #fff"}})})),u.a.createElement("div",{className:k.a.testdata,style:{flex:1,width:"".concat(he,"%"),backgroundColor:"#E73B40"}})),u.a.createElement("div",{className:k.a.legend},u.a.createElement("div",{className:k.a.number},u.a.createElement("span",{className:k.a.cvdataCir}),u.a.createElement("span",{className:k.a.symbol},Object(O["formatMessage"])({id:"train.cvdata"}))),u.a.createElement("div",{className:k.a.type},u.a.createElement("span",{className:k.a.testCir}),u.a.createElement("span",{className:k.a.symbol},Object(O["formatMessage"])({id:"train.testUnion"}))))))):f===N["PartitionStrategy"].Manual?u.a.createElement(y["a"],{placeholder:ct(),style:{width:300},disabled:!Xe,onChange:tt,value:Te},Ye.map((e,t)=>{return u.a.createElement(D,{value:e.name,key:t},e.name)})):u.a.createElement("div",null,u.a.createElement("dl",null,u.a.createElement("dt",null,Object(O["formatMessage"])({id:"train.random_split.seed"}))),u.a.createElement(g["a"],null,u.a.createElement(E["a"],{onChange:e=>ye(e),min:0,max:65535,value:_e,style:{width:300}})),u.a.createElement("dl",null,u.a.createElement("dt",null,Object(O["formatMessage"])({id:"train.random_split.proportion"}))),u.a.createElement(g["a"],{style:{width:"90%"}},u.a.createElement(j["b"],{dataRef:c,sliderData:ze})))},it=e=>{Re(!1),te(e)},ot=()=>{var e={label_col:Z,pos_label:ee,train_mode:se,experiment_engine:J,datetime_series_col:Me};if(e["partition_strategy"]=f,f===N["PartitionStrategy"].CrossValidation)e["cross_validation"]={n_folds:he};else if(f===N["PartitionStrategy"].TrainValidationHoldout){var t=c.current.getData();e["train_validation_holdout"]={train_percentage:t[0].count,validation_percentage:t[1].count,holdout_percentage:t[2].count,random_state:_e}}else{if(f!==N["PartitionStrategy"].Manual)return void Object(w["a"])("Unseen partition strategy: "+f);e["partition_col"]=Te}var n={datasetName:r,param:e};n["param"].hasOwnProperty("label_col")&&void 0===n["param"]["label_col"]?Pe(!0):n["param"].hasOwnProperty("pos_label")&&""===n["param"]["pos_label"]?Re(!0):a({type:"train/train",payload:n})},st=()=>{return Ze?Object(O["formatMessage"])({id:"train.datetimeColSelectorNoItem"}):Object(O["formatMessage"])({id:"train.select"})},ct=()=>{return Xe?Object(O["formatMessage"])({id:"train.partition.noPartitionCols"}):Object(O["formatMessage"])({id:"train.select"})},mt={multi_classification:"train.taskMultiClassification",binary_classification:"train.taskBinaryClassification",regression:"train.taskRegression"},dt=mt[re],ut=e=>{return u.a.createElement("span",{style:{color:"#c4c4c4",marginLeft:2}},e)};return u.a.createElement(s["a"],{form:$e},u.a.createElement("dl",{className:k.a.tag},u.a.createElement("dt",null,u.a.createElement("span",null,Object(O["formatMessage"])({id:"train.tagCol"}))),u.a.createElement("dd",null,u.a.createElement("div",null,ut(Object(O["formatMessage"])({id:"train.hintTarget"}))),u.a.createElement("span",null,u.a.createElement(y["a"],{value:Z,placeholder:Object(O["formatMessage"])({id:"train.select"}),style:{width:300,marginBottom:20},onChange:et},Je&&Je.map(e=>{return u.a.createElement(D,{value:e.name},e.name)}))),u.a.createElement(i["a"],{type:"primary",style:{marginLeft:10},onClick:ot},Object(O["formatMessage"])({id:"train.train"}))),De?u.a.createElement("div",{className:k.a.labelTip,style:{marginTop:-20}},Object(O["formatMessage"])({id:"train.labelNotEmpty"})):null),u.a.createElement("dl",null,0!==re.length&&u.a.createElement(u.a.Fragment,null,u.a.createElement("dt",null,Object(O["formatMessage"])({id:"train.taskType"}),Object(C["g"])("train.hintTaskType")),u.a.createElement("dd",null,u.a.createElement("span",{style:{color:"#c4c4c4",marginLeft:2}},"  ",Object(O["formatMessage"])({id:"train.hintInferTaskType"},{taskType:Object(O["formatMessage"])({id:dt})}),"   ")))),u.a.createElement("dl",null,u.a.createElement(S,{labelType:B,labelData:I,style:{width:350}})),"binary_classification"===re&&u.a.createElement("dl",{className:k.a.binary},u.a.createElement("dt",null,Object(O["formatMessage"])({id:"train.normalSampleModal"}),Object(C["g"])("train.hintPositiveLabel")),u.a.createElement("dd",null,u.a.createElement(y["a"],{value:ee,placeholder:Object(O["formatMessage"])({id:"train.select"}),style:{width:300},onChange:it},A&&A.map((e,t)=>{return u.a.createElement(D,{value:e.type,key:t},e.type)}))),Fe?u.a.createElement("div",{className:k.a.labelTip},Object(O["formatMessage"])({id:"train.posNotEmpty"})):null),u.a.createElement("dl",{className:k.a.mode},u.a.createElement("dt",null,Object(O["formatMessage"])({id:"train.experimentEngine"}),Object(C["g"])("train.hintExperimentEngine")),u.a.createElement("dd",null,u.a.createElement(y["a"],{value:J,placeholder:Object(O["formatMessage"])({id:"train.select"}),style:{width:300},onChange:e=>{K(e)}},o.map(e=>{return u.a.createElement(D,{value:e,key:e},e)})))),u.a.createElement("dl",{className:k.a.mode},u.a.createElement("dt",null,Object(O["formatMessage"])({id:"train.trainMode"}),Object(C["g"])("train.hintTrainMode")),u.a.createElement("dd",null,u.a.createElement(l["a"].Group,{onChange:e=>ce(e.target.value),value:se},u.a.createElement(l["a"],{value:"quick"},Object(O["formatMessage"])({id:"train.quick"})),u.a.createElement(l["a"],{value:"performance"},Object(O["formatMessage"])({id:"train.performance"}))))),u.a.createElement("dl",null,u.a.createElement("dt",null,Object(O["formatMessage"])({id:"train.dataAllot"}),Object(C["g"])("train.partition.hint"))),u.a.createElement(n["a"],{title:rt,style:{width:"60%"}},u.a.createElement("div",null,lt())),u.a.createElement("dl",null,u.a.createElement("dt",null,Object(O["formatMessage"])({id:"train.datetimeCol"}),Object(C["g"])("train.hintDatetimeSeriesFeature")),u.a.createElement("dd",null,u.a.createElement(y["a"],{placeholder:st(),style:{width:300},disabled:!Ze,onChange:Se},Ke.map((e,t)=>{return u.a.createElement(D,{value:e.name,key:t},e.name)})))))},L=Object(b["o"])(Object(p["c"])(e=>{var t=e.dataset,a=e.train;return{dataset:t,train:a}})(I)),F=(a("g9YV"),a("wCAj")),R=(a("qVdP"),a("jsC+")),A=(a("5Dmo"),a("3S7+")),U=(a("T2oS"),a("W9HT")),z=(a("lUTK"),a("BvKs")),q=(a("Znn+"),a("ZTPi")),B=a("ye1Q"),V=a("bRQS"),W=a("4i/N"),H=(a("Mwp2"),a("VXEj")),J=a("EK1h"),K=a.n(J),Y=[{value:"explained_variance",name:"EVS"},{value:"neg_mean_absolute_error",name:"MAE"},{value:"neg_mean_squared_error",name:"MSE"},{value:"neg_mean_squared_log_error",name:"MSLE"},{value:"neg_median_absolute_error",name:"MedianAE"},{value:"r2",name:"R2"},{value:"accuracy",name:"Accuracy"},{value:"f1",name:"F1"},{value:"precision",name:"Precision"},{value:"recall",name:"Recall"},{value:"roc_auc",name:"AUC"},{value:"fbeta",name:"FBeta"},{value:"log_loss",name:"Log Loss"},{value:"rmse",name:"RMSE"},{value:"mse",name:"MSE"},{value:"mae",name:"MAE"},{value:"evs",name:"EVS"},{value:"msle",name:"MSLE"}],X=e=>{var t=e.modelName,a=e.location.query.datasetName,n=e.key,r=Object(d["useState"])({}),l=m()(r,2),i=l[0],o=l[1],s=Object(d["useState"])({}),c=m()(s,2),p=c[0],b=c[1],f=Object(d["useState"])({}),h=m()(f,2),E=h[0],_=h[1],y=Object(d["useState"])(""),M=m()(y,2),S=M[0],x=M[1],k=Object(d["useState"])(!0),w=m()(k,2),N=w[0],D=w[1];Object(d["useEffect"])(()=>{var e={datasetName:a,modelName:t};Object(T["i"])(e).then(e=>{var t=e.data;t.performance&&(D(!1),o(t.performance.confusion_matrix),b(t.performance.metrics),_(t.performance.roc_curve),x(t.task_type))})},[a,t]);var P=[];if(E){var I=E.false_positive_rate,L=void 0===I?[]:I,R=E.true_positive_rate,A=void 0===R?[]:R,U=E.thresholds,z=void 0===U?[]:U;L.forEach(e=>{P.push({x:e})}),A.forEach((e,t)=>{P[t]["y"]=e}),z.forEach((e,t)=>{P[t]["z"]=e,P[t]["name"]="True positive rate"})}var q=[];Object.keys(p).forEach(e=>{q.push({name:e.toLowerCase(),score:p[e]})});var B=e=>{var t=Y.filter(t=>t.value===e);return t.length>0?t[0].name:e},V=e=>{if(i){var t=i.label,a=void 0===t?{}:t;return u.a.createElement("div",{style:{textAlign:"center"}},u.a.createElement("span",null,"yes"===e?a.true:a.false))}},W=e=>{if(i){var t=i.label,a=void 0===t?{}:t;return u.a.createElement("span",null,"yes"===e?a.true:a.false)}},J=(e,t)=>{return"success"===e?u.a.createElement("span",{style:{color:"#13c2c2"}},t):u.a.createElement("span",{style:{color:"#f5222d"}},t)},X={precision:"Precision",recall:"Recall",f1:"F1",accuracy:"Accuracy",roc_auc:"AUC"},Z=e=>{return["accuracy","f1","recall","precision","roc_auc"].map((t,a)=>({y:X[t],x:e[t]?e[t]:0}))},G=Z(p),Q=[{title:"",children:[{title:Object(O["formatMessage"])({id:"center.actual"}),dataIndex:"actual",key:"actual",align:"center"}]},{title:Object(O["formatMessage"])({id:"center.evaluate.predict"}),children:[{title:V("yes"),dataIndex:"predicted_yes",align:"center"},{title:V("no"),dataIndex:"predicted_no",align:"center"},{title:"Total",dataIndex:"total",align:"center"}]}],$=[];return i&&($=[{id:"index",actual:W("yes"),predicted_yes:J("success",i.tp),predicted_no:J("failed",i.fn),total:i.tp+i.fn},{id:"index1",actual:W("no"),predicted_yes:J("failed",i.fp),predicted_no:J("success",i.tn),total:i.fp+i.tn},{id:"index2",actual:"Total",predicted_yes:i.tp+i.fp,predicted_no:i.fn+i.tn,total:i.tp+i.fn+i.fp+i.tn}]),u.a.createElement(u.a.Fragment,null,N?u.a.createElement("div",{style:{textAlign:"center",color:"#c4c4c4"}},Object(O["formatMessage"])({id:"center.training"})):u.a.createElement(g["a"],{key:n},"binary_classification"===S&&u.a.createElement(v["a"],{span:24},u.a.createElement("h3",null,Object(C["e"])("center.mix","center.hintConfusionMatrix")),u.a.createElement(F["a"],{columns:Q,dataSource:$,size:"small",bordered:!0,pagination:!1,rowKey:e=>e.actual})),u.a.createElement("h3",{style:{marginTop:20}},Object(O["formatMessage"])({id:"center.modalEvaluate"})),"regression"!==S?u.a.createElement(v["a"],{span:24,style:{marginTop:10}},u.a.createElement(j["e"],{data:G})):null,u.a.createElement(v["a"],{span:24},q.length>0&&u.a.createElement("div",{className:K.a.box},u.a.createElement(H["b"],{dataSource:q,renderItem:(e,t)=>u.a.createElement(H["b"].Item,null,u.a.createElement(H["b"].Item.Meta,{style:{float:"left"},title:B(e.name)}),u.a.createElement("div",{style:{float:"right"}}," ",e.score&&e.score.toFixed(4)))}))),"binary_classification"===S&&u.a.createElement(v["a"],{span:24},u.a.createElement("h3",{style:{marginTop:20}},Object(O["formatMessage"])({id:"center.roc"})),u.a.createElement("div",{style:{width:1e3}},u.a.createElement(j["c"],{data:P,height:500})))))},Z=Object(b["o"])(Object(p["c"])(e=>{var t=e.center;return{center:t}})(X)),G=(a("miYZ"),a("tsqr")),Q=(a("FJo9"),a("L41K")),$=(a("DZo9"),a("8z0m")),ee=a("LtfV"),te=$["a"].Dragger,ae=Q["a"].Step,ne=e=>{Object(w["a"])("Unseen step status "+(null===e||void 0===e?void 0:e.status)+" of "+(null===e||void 0===e?void 0:e.type))},re=e=>{e.indexParam;var t,a=e.modelName,n=e.taskStatus,r=e.location.query.datasetName,l=Object(d["useState"])(null),i=m()(l,2),o=i[0],s=i[1],c=Object(d["useState"])("-"),p=m()(c,2),b=p[0],f=p[1],h=Object(d["useState"])("-"),E=m()(h,2),_=E[0],y=E[1],j=Object(d["useState"])("-"),M=m()(j,2),S=M[0],x=M[1],k=Object(d["useState"])("-"),D=m()(k,2),P=D[0],I=D[1],L=Object(d["useState"])("-"),F=m()(L,2),R=F[0],A=F[1],U=Object(d["useState"])(""),z=m()(U,2),q=z[0],B=z[1],V=Object(d["useState"])(-1),W=m()(V,2),H=W[0],J=W[1],K=()=>{null!==t&&(clearInterval(t),t=null)},Y=(e,t,a)=>{Object(T["j"])(e,t,a).then(e=>{if(null!==e&&void 0!==e)if(0===e.code){var t=e.data.steps;if(null!==t&&void 0!==t){var a=Object(C["d"])(t),n=a[N["PredictStepType"].Upload];null!==n&&void 0!==n&&(J(0),n.status===N["StepStatus"].Succeed?f(Object(O["formatMessage"])({id:"center.batchPredict.processTip.upload"},{fileSize:Object(C["b"])(n.extension.file_size),took:n.took.toFixed(2)})):n.status===N["StepStatus"].Failed?Z(f):ne(n));var r=a[N["PredictStepType"].Load];null!==r&&void 0!==r&&(J(1),r.status===N["StepStatus"].Succeed?y(Object(O["formatMessage"])({id:"center.batchPredict.processTip.loadData"},{nRows:r.extension.n_rows,nCols:r.extension.n_cols,took:r.took.toFixed(2)})):r.status===N["StepStatus"].Failed?Z(y):ne(n));var l=a[N["PredictStepType"].LoadModel];null!==l&&void 0!==l&&(J(2),l.status===N["StepStatus"].Succeed?x(Object(O["formatMessage"])({id:"center.batchPredict.processTip.loadModel"},{modelSize:Object(C["b"])(l.extension.model_size),took:l.took.toFixed(2)})):l.status===N["StepStatus"].Failed?Z(x):ne(l));var i=a[N["PredictStepType"].Evaluate];null!==i&&void 0!==i&&(J(3),i.status===N["StepStatus"].Succeed?I(Object(O["formatMessage"])({id:"center.batchPredict.processTip.evaluate"},{took:i.took.toFixed(2)})):i.status===N["StepStatus"].Failed?Z(I):ne(i));var o=a[N["PredictStepType"].WriteResult];null!==o&&void 0!==o&&(K(),J(4),o.status===N["StepStatus"].Succeed?(A(u.a.createElement(u.a.Fragment,null,u.a.createElement("p",null,u.a.createElement("a",{download:!0,href:"/api/resource/".concat(o.extension.output_path,"?opt=download")},Object(O["formatMessage"])({id:"center.batchPredict.processTip.writeResult"}))))),B("finish")):o.status===N["StepStatus"].Failed?Z(A):ne(o))}else Object(w["a"])("Response steps from server of prediction is null yet code is 0 "),K()}else K();else Object(w["a"])("Response from server of prediction is null"),K()})},X=(e,a,n,r)=>{console.error("\u5f00\u542f\u5b9a\u65f6\u5668: 11111"),console.error("2\u5f00\u542f\u5b9a\u65f6\u5668: "+t);var l={file_path:n,upload_took:r};Object(T["a"])(e,a,l).then(n=>{var r=n.data;Y(e,a,r.batch_predict_job_name),null!==t&&K(),t=setInterval(()=>{console.error("1\u5f00\u542f\u5b9a\u65f6\u5668: "+t),Y(e,a,r.batch_predict_job_name)},1e3),console.error("\u5f00\u542f\u5b9a\u65f6\u5668: "+t)})},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Failed";e(t),B("error"),K()},$={name:"file",multiple:!1,accept:".csv, .tsv",headers:{"File-Name":o},action:"/api/resource",beforeUpload:e=>{if(e.size>128e6)return G["b"].warning(Object(O["formatMessage"])({id:"center.big"})),!1;s(e.name)},showUploadList:!1,onChange(e){var t=e.file.status;"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?(J(0),X(r,a,e.file.response.data.path,e.file.response.data.took)):"error"===t&&(G["b"].error("".concat(e.file.name," ").concat(Object(O["formatMessage"])({id:"center.failUpload"}))),B("error"))}},re=u.a.createElement(g["a"],null,u.a.createElement(v["a"],{span:24},u.a.createElement(te,$,u.a.createElement("p",{className:"ant-upload-drag-icon"},u.a.createElement(ee["a"],null)),u.a.createElement("p",{className:"ant-upload-text"},Object(O["formatMessage"])({id:"center.uploadBox"})),u.a.createElement("p",{className:"ant-upload-hint"},Object(O["formatMessage"])({id:"center.uploadtips"})))),u.a.createElement(v["a"],{span:24,style:{marginTop:24}},u.a.createElement(Q["a"],{current:H,status:q},u.a.createElement(ae,{title:Object(O["formatMessage"])({id:"center.uploadData"}),description:b}),u.a.createElement(ae,{title:Object(O["formatMessage"])({id:"center.loadData"}),description:_}),u.a.createElement(ae,{title:Object(O["formatMessage"])({id:"center.read"}),description:S}),u.a.createElement(ae,{title:Object(O["formatMessage"])({id:"center.predictData"}),description:P}),u.a.createElement(ae,{title:Object(O["formatMessage"])({id:"center.result"}),description:R})))),le=u.a.createElement("div",{style:{textAlign:"center",color:"#c4c4c4"}},Object(O["formatMessage"])({id:"center.training"}));return"running"===n?le:re},le=Object(b["o"])(Object(p["c"])(e=>{var t=e.center;return{center:t}})(re)),ie=a("p0pE"),oe=a.n(ie),se=(a("R9oj"),a("ECub")),ce=a("Y/ft"),me=a.n(ce),de=a("MT78"),ue=a.n(de),pe=(a("XOKv"),a("17x9"),a("iLNv")),be=a("zHMj"),fe=a("bYtY"),he=(e,t)=>{var a={};return t.forEach(t=>{a[t]=e[t]}),a};class ge extends d["Component"]{constructor(e){super(e),this.getEchartsInstance=(()=>this.echartsLib.getInstanceByDom(this.echartsElement)||this.echartsLib.init(this.echartsElement,this.props.theme,this.props.opts)),this.renderEchartDom=(()=>{var e=this.getEchartsInstance();return e.setOption(this.props.option,this.props.notMerge||!1,this.props.lazyUpdate||!1),window.addEventListener("resize",()=>{e&&e.resize()}),this.props.showLoading?e.showLoading(this.props.loadingOption||null):e.hideLoading(),e}),this.dispose=(()=>{if(this.echartsElement){try{Object(pe["clear"])(this.echartsElement)}catch(e){console.warn(e)}this.echartsLib.dispose(this.echartsElement)}}),this.rerender=(()=>{var e=this.props,t=e.onEvents,a=e.onChartReady,n=this.renderEchartDom();this.bindEvents(n,t||{}),"function"===typeof a&&this.props.onChartReady(n),this.echartsElement&&Object(fe["bind"])(this.echartsElement,()=>{try{n&&n.resize()}catch(e){console.warn(e)}})}),this.bindEvents=((e,t)=>{var a=(t,a)=>{"string"===typeof t&&"function"===typeof a&&e.on(t,t=>{a(t,e)})};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a(n,t[n])}),this.echartsLib=ue.a,this.echartsElement=null}componentDidMount(){this.renderEchartDom()}componentDidUpdate(e){if(!Object(be["a"])(e.theme,this.props.theme)||!Object(be["a"])(e.opts,this.props.opts)||!Object(be["a"])(e.onEvents,this.props.onEvents))return this.dispose(),void this.rerender();var t=["option","notMerge","lazyUpdate","showLoading","loadingOption"];if(Object(be["a"])(he(this.props,t),he(e,t))&&("function"!==typeof this.props.shouldSetOption||this.props.shouldSetOption(e,this.props))){var a=this.renderEchartDom();if(!Object(be["a"])(e.style,this.props.style)||!Object(be["a"])(e.className,this.props.className))try{a&&a.resize()}catch(e){console.warn(e)}}}componentWillUnmount(){this.dispose()}render(){var e=this.props,t=e.style,a=e.className,n=oe()({height:300},t);return u.a.createElement("div",{ref:e=>{this.echartsElement=e},style:n,className:a})}}ge.defaultProps={style:{},className:"",notMerge:!1,lazyUpdate:!1,showLoading:!1,loadingOption:null,theme:null,onChartReady:()=>{},onEvents:{},opts:{},shouldSetOption:()=>!0};var Ee=ge;function ve(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=_e(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw l}}}}function _e(e,t){if(e){if("string"===typeof e)return ye(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ye(e,t):void 0}}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}class Oe extends d["PureComponent"]{constructor(){super(...arguments),this.getOption=((e,t)=>{return{parallelAxis:[],series:[{type:"parallel",lineStyle:{width:2},data:[]}],visualMap:{min:e,max:t,left:0,precision:4,calculable:!0,orient:"vertical",bottom:"15%",hoverLink:!0}}})}render(){var e=this.props,t=(e.style,e.className,e.data);e.xAxisProp,e.seriesData,e.loading,me()(e,["style","className","data","xAxisProp","seriesData","loading"]);if(!t||!t.hasOwnProperty("data"))return u.a.createElement(se["a"],null);var a,n=[],r=ve(t.data);try{for(r.s();!(a=r.n()).done;){var l=a.value;n.push(l.reward)}}catch(e){r.e(e)}finally{r.f()}var i=this.getOption(Math.min(...n),Math.max(...n));return t.param_names.forEach((e,t)=>{i.parallelAxis.push({dim:t,name:e})}),t.data.forEach((e,a)=>{i["series"]["data"]=new Array(t.param_names.length),i["series"][0]["data"][a]=e.params}),u.a.createElement(Ee,{option:oe()({},i)})}}var je,Me=Oe,Se=e=>{var t=e.modelName,a=e.location.query.datasetName,n=Object(d["useState"])({}),r=m()(n,2),l=r[0],i=r[1],o=Object(d["useState"])(!0),s=m()(o,2),c=s[0],p=s[1];return Object(d["useEffect"])(()=>{var e={datasetName:a,modelName:t};Object(T["i"])(e).then(e=>{var t=e.data;if(t.trials){p(!1);var a=t.trials;a.param_names.push("Reward metric"),a.data.forEach(e=>{e.params.push(e.reward)}),i(a)}})},[a,t]),u.a.createElement("div",null,c?u.a.createElement("div",{style:{textAlign:"center",color:"#c4c4c4"}},Object(O["formatMessage"])({id:"center.training"})):u.a.createElement(Me,{data:l}))},xe=Object(b["o"])(Se),ke=q["a"].TabPane,Te=u.a.createElement(B["a"],{style:{fontSize:16},spin:!0});class Ce extends u.a.Component{constructor(e){super(e),this.batchPredictStepType={upload:"upload",load:"load",load_model:"load_model"},this.metricDisplayMapping={auc:"AUC",accuracy:"Accuracy",rmse:"RMSE"},this.formatTrainMode={[N["TrainMode"].Quick]:Object(O["formatMessage"])({id:"train.quick"}),[N["TrainMode"].Performance]:Object(O["formatMessage"])({id:"train.performance"}),[N["TrainMode"].Minimal]:Object(O["formatMessage"])({id:"train.minimal"})},this.viewLog=(e=>{window.open("/api/resource/".concat(e,"?opt=head&n=1000"))}),this.viewSourceCode=(e=>{window.open("/api/resource/".concat(e,"?opt=head&n=-1"))}),this.viewNotebook=(e=>{window.open("".concat(this.state.notebookPortal,"/notebooks/").concat(e))}),this.localTrainMode=(e=>{return"minimal"===e?Object(O["formatMessage"])({id:"train.minimal"}):"quick"===e?Object(O["formatMessage"])({id:"train.quick"}):"performance"===e?Object(O["formatMessage"])({id:"train.performance"}):void 0}),this.getOptionMenu=(e=>{return u.a.createElement(z["a"],null,u.a.createElement(z["a"].Item,null,u.a.createElement("span",{style:{color:"#1890ff",cursor:"pointer"},onClick:()=>{this.viewLog(e.log_file_path)}},Object(O["formatMessage"])({id:"center.log"}))),u.a.createElement(z["a"].Item,null,u.a.createElement("span",{style:{color:"#1890ff",cursor:"pointer"},onClick:()=>{this.viewSourceCode(e.train_source_code_path)}},Object(O["formatMessage"])({id:"center.source"}))),u.a.createElement(z["a"].Item,null,u.a.createElement("span",{style:{color:"#1890ff",cursor:"pointer"},onClick:()=>{this.viewNotebook(e.train_notebook_uri)}},Object(O["formatMessage"])({id:"center.titleNotebook"}))))}),this.columns=[{title:"",dataIndex:"status",key:"status",render:(e,t)=>{return"running"===t.status?u.a.createElement(U["a"],{indicator:Te}):"succeed"===t.status?u.a.createElement(V["a"],{style:{fontSize:16,color:"green"}}):"failed"===t.status?u.a.createElement(W["a"],{style:{fontSize:16,color:"red"}}):void 0}},{title:Object(O["formatMessage"])({id:"center.modal"}),dataIndex:"no_experiment",key:"no_experiment"},{title:Object(O["formatMessage"])({id:"center.titleEngine"}),dataIndex:"engine",key:"engine"},{title:Object(O["formatMessage"])({id:"train.trainMode"}),dataIndex:"train_mode",key:"train_mode",render:e=>{return this.formatTrainMode[e]}},{title:u.a.createElement(u.a.Fragment,null,Object(O["formatMessage"])({id:"center.target"}),Object(C["g"])("center.hintOptimizeMetric")," "),dataIndex:"score",key:"score",render:(e,t,a)=>{var n=t.score;return n?u.a.createElement(A["a"],{placement:"right",color:"white",title:Object(O["formatMessage"])({id:"center.hintTargetCol"},{targetCol:t.target_col})},u.a.createElement("span",null,n.toFixed(6),"(",this.metricDisplayMapping[t.metric_name],")")):u.a.createElement("span",null,"-")}},{title:Object(C["e"])("center.process","center.hintProgress"),dataIndex:"max_train_trial_no",key:"max_train_trial_no",render:(e,t,a)=>{var n="".concat(t.train_trial_no,"/").concat(t.max_train_trial_no);return"succeed"===t.status&&t.train_trial_no!==t.max_train_trial_no?Object(C["f"])(u.a.createElement("span",{style:{color:"orange"}},n),Object(O["formatMessage"])({id:"center.hintEarlyStopping"})):u.a.createElement("span",null,n)}},{title:Object(C["e"])("center.remain","center.hintRemainingTime"),dataIndex:"estimated_remaining_time",key:"estimated_remaining_time",render:e=>{if(0===e)return u.a.createElement("span",null,Object(O["formatMessage"])({id:"center.finished"}));if(e){var t=e>3600?{color:"red"}:{};return u.a.createElement("span",{style:t},Object(C["c"])(e))}return u.a.createElement("span",null,"-")}},{title:Object(C["e"])("center.spend","center.hintElapsed"),dataIndex:"escaped",key:"escaped",render:e=>{var t=e>3600?{color:"red"}:{};return u.a.createElement("span",{style:t},Object(C["c"])(e))}},{title:Object(C["e"])("center.size","center.hintModelSize"),dataIndex:"model_file_size",key:"model_file_size",render:e=>{return e?u.a.createElement("span",null,Object(C["b"])(e)):u.a.createElement("span",null,"-")}},{title:Object(C["e"])("center.titleResource","center.hintResource"),dataIndex:"train_notebook_uri",align:"center",key:"train_notebook_uri",render:(e,t,a)=>{return u.a.createElement(R["a"],{overlay:this.getOptionMenu(t),placement:"bottomCenter"},u.a.createElement("a",null,"..."))}}],this.loadMoreContent=(()=>u.a.createElement("div",{style:{textAlign:"center",paddingTop:40,paddingBottom:40,border:"1px solid #e8e8e8"}},u.a.createElement(U["a"],{tip:"Loading..."}))),this.state={listData:[],notebookPortal:""},this.datasetName=this.props.location.query.datasetName}handleFetchList(){var e=this.datasetName;Object(T["o"])(e).then(e=>{var t=e.data;this.setState({listData:t.experiments.map(e=>{return e.key=e.no_experiment,e}),notebookPortal:t.notebook_portal});var a=t.experiments.map(e=>e.status);a.includes("running")||(clearInterval(je),je=null)})}componentDidMount(){null!==je&&void 0!==je&&clearInterval(je),this.handleFetchList(),je=setInterval(this.handleFetchList.bind(this),N["REFRESH_EXPERIMENT_LIST_TIMEOUT"])}componentWillUnmount(){null!=this.timer&&clearInterval(this.timer)}render(){return u.a.createElement("div",null,u.a.createElement(F["a"],{dataSource:this.state.listData,columns:this.columns,pagination:!1,expandable:{expandedRowRender:e=>{return"succeed"===e.status||"running"===e.status?u.a.createElement(q["a"],{onChange:e=>console.log(e),type:"card"},u.a.createElement(ke,{tab:Object(O["formatMessage"])({id:"center.evaluate"}),key:"1"},u.a.createElement(Z,{modelName:e.name,key:e.key})),u.a.createElement(ke,{tab:Object(O["formatMessage"])({id:"center.predict"}),key:"2"},u.a.createElement(le,{modelName:e.name,taskStatus:e.status})),u.a.createElement(ke,{tab:Object(O["formatMessage"])({id:"center.param"}),key:"3"},u.a.createElement(xe,{modelName:e.name}))):"failed"===e.status?u.a.createElement("div",{style:{textAlign:"center",color:"#c4c4c4"}},Object(O["formatMessage"])({id:"center.fail"}),u.a.createElement("a",{onClick:()=>{this.viewLog(e.log_file_path)},target:"_blank"},Object(O["formatMessage"])({id:"center.bug"}))):void 0}}}))}}var we=Object(b["o"])(Object(p["c"])(e=>{var t=e.train;return{train:t}})(Ce)),Ne=e=>{var t=e.dispatch,a=e.location.query.datasetName,c=e.train.defaultTab,p={a:u.a.createElement(f["default"],{datasetName:a}),b:u.a.createElement(h["default"],{datasetNameFromParam:a,isTemporary:!1}),c:u.a.createElement(L,null),d:u.a.createElement(we,null)},b=s["a"].useForm(),g=m()(b,1),E=g[0];Object(d["useEffect"])(()=>{var e=localStorage.getItem("tab")||c;t({type:"train/save",payload:{defaultTab:e}})},[]);var v=u.a.createElement(u.a.Fragment,null,u.a.createElement(s["a"].Item,{style:{float:"left",marginRight:10,marginTop:20,visibility:"hidden"},name:"datasetName",label:"\u6570\u636e\u96c6\u540d\u79f0"},u.a.createElement(o["a"],null)),u.a.createElement(i["a"],{style:{float:"right",marginTop:20,visibility:"hidden"},type:"primary"},"\u521b\u5efa")),_=e=>{localStorage.setItem("tab",e.target.value),t({type:"train/save",payload:{defaultTab:e.target.value}})},y=u.a.createElement(l["a"].Group,{onChange:_,value:c},u.a.createElement(l["a"].Button,{value:"a"},Object(O["formatMessage"])({id:"extra.preview"})),u.a.createElement(l["a"].Button,{value:"b"},Object(O["formatMessage"])({id:"extra.dataExplore"})),u.a.createElement(l["a"].Button,{value:"c"},Object(O["formatMessage"])({id:"extra.train"})),u.a.createElement(l["a"].Button,{value:"d"},Object(O["formatMessage"])({id:"extra.center"})));return u.a.createElement(s["a"],{form:E,initialValues:{n_rows:1e3}},u.a.createElement("div",{className:k.a.breadcrumb},u.a.createElement(r["a"],null,u.a.createElement(r["a"].Item,null,u.a.createElement("a",{href:"/"},Object(O["formatMessage"])({id:"extra.dataset"}))),u.a.createElement(r["a"].Item,null,Object(O["formatMessage"])({id:"extra.explore"})),u.a.createElement(r["a"].Item,null,a))),u.a.createElement(n["a"],{title:y,extra:v},p[c]))};t["default"]=Object(b["o"])(Object(p["c"])(e=>{var t=e.dataset,a=e.train;return{dataset:t,train:a}})(Ne))}}]);