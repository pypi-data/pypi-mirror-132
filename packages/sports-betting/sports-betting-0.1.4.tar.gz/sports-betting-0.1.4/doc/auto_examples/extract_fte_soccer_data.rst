
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/extract_fte_soccer_data.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_examples_extract_fte_soccer_data.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_extract_fte_soccer_data.py:


===========================
FiveThirtyEight soccer data
===========================

This example illustrates the usage of FiveThirtyEight soccer dataloader.

.. GENERATED FROM PYTHON SOURCE LINES 9-16

.. code-block:: default


    # Author: Georgios Douzas <gdouzas@icloud.com>
    # Licence: MIT

    import pandas as pd
    from sportsbet.datasets import FTESoccerDataLoader








.. GENERATED FROM PYTHON SOURCE LINES 17-19

Getting the available parameters
##############################################################################

.. GENERATED FROM PYTHON SOURCE LINES 21-23

We can get the available parameters in order to select the training data
to be extracted, using the :meth:`get_all_params` class method.

.. GENERATED FROM PYTHON SOURCE LINES 23-26

.. code-block:: default


    params = FTESoccerDataLoader.get_all_params()








.. GENERATED FROM PYTHON SOURCE LINES 27-28

The available parameters can be presented as a DataFrame.

.. GENERATED FROM PYTHON SOURCE LINES 28-34

.. code-block:: default


    params_df = pd.DataFrame(params).sort_values(
        ['league', 'year', 'division'], ignore_index=True
    )
    params_df






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>division</th>
          <th>league</th>
          <th>year</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>0</th>
          <td>1</td>
          <td>Argentina</td>
          <td>2018</td>
        </tr>
        <tr>
          <th>1</th>
          <td>1</td>
          <td>Argentina</td>
          <td>2019</td>
        </tr>
        <tr>
          <th>2</th>
          <td>1</td>
          <td>Argentina</td>
          <td>2020</td>
        </tr>
        <tr>
          <th>3</th>
          <td>1</td>
          <td>Argentina</td>
          <td>2022</td>
        </tr>
        <tr>
          <th>4</th>
          <td>1</td>
          <td>Australia</td>
          <td>2019</td>
        </tr>
        <tr>
          <th>...</th>
          <td>...</td>
          <td>...</td>
          <td>...</td>
        </tr>
        <tr>
          <th>174</th>
          <td>1</td>
          <td>USA</td>
          <td>2022</td>
        </tr>
        <tr>
          <th>175</th>
          <td>1</td>
          <td>United-Soccer-League</td>
          <td>2019</td>
        </tr>
        <tr>
          <th>176</th>
          <td>1</td>
          <td>United-Soccer-League</td>
          <td>2020</td>
        </tr>
        <tr>
          <th>177</th>
          <td>1</td>
          <td>United-Soccer-League</td>
          <td>2021</td>
        </tr>
        <tr>
          <th>178</th>
          <td>1</td>
          <td>United-Soccer-League</td>
          <td>2022</td>
        </tr>
      </tbody>
    </table>
    <p>179 rows × 3 columns</p>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 35-37

We select to extract training data only for the year 2021 of all the
divisions of English league.

.. GENERATED FROM PYTHON SOURCE LINES 37-40

.. code-block:: default


    param_grid = {'league': ['England'], 'year': [2021]}








.. GENERATED FROM PYTHON SOURCE LINES 41-43

Getting the available odds types
##############################################################################

.. GENERATED FROM PYTHON SOURCE LINES 45-47

We can get the available odds types in order to match the output of the
training data, using the :meth:`get_odds_types` class method.

.. GENERATED FROM PYTHON SOURCE LINES 47-50

.. code-block:: default


    FTESoccerDataLoader.get_odds_types()





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none


    []



.. GENERATED FROM PYTHON SOURCE LINES 51-52

Therefore no odds data are available.

.. GENERATED FROM PYTHON SOURCE LINES 54-56

Extracting the training data
##############################################################################

.. GENERATED FROM PYTHON SOURCE LINES 58-60

We extract the training data using the default values for the parameters
`odds_type` and `drop_na_thres`.

.. GENERATED FROM PYTHON SOURCE LINES 60-64

.. code-block:: default


    dataloader = FTESoccerDataLoader(param_grid=param_grid)
    X_train, Y_train, _ = dataloader.extract_train_data()








.. GENERATED FROM PYTHON SOURCE LINES 65-66

The input data:

.. GENERATED FROM PYTHON SOURCE LINES 66-68

.. code-block:: default

    X_train






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>league</th>
          <th>home_team</th>
          <th>away_team</th>
          <th>home_team_soccer_power_index</th>
          <th>away_team_soccer_power_index</th>
          <th>home_team_probability_win</th>
          <th>away_team_probability_win</th>
          <th>probability_draw</th>
          <th>home_team_projected_score</th>
          <th>away_team_projected_score</th>
          <th>home_team_match_importance</th>
          <th>away_team_match_importance</th>
          <th>division</th>
          <th>year</th>
          <th>match_quality</th>
        </tr>
        <tr>
          <th>date</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>2020-09-11</th>
          <td>England</td>
          <td>Watford</td>
          <td>Middlesbrough</td>
          <td>65.12</td>
          <td>46.31</td>
          <td>0.6387</td>
          <td>0.1423</td>
          <td>0.2190</td>
          <td>2.06</td>
          <td>0.85</td>
          <td>53.0</td>
          <td>16.5</td>
          <td>2</td>
          <td>2021</td>
          <td>54.127384</td>
        </tr>
        <tr>
          <th>2020-09-12</th>
          <td>England</td>
          <td>Huddersfield Town</td>
          <td>Norwich City</td>
          <td>47.84</td>
          <td>60.45</td>
          <td>0.2708</td>
          <td>0.4612</td>
          <td>0.2680</td>
          <td>1.17</td>
          <td>1.60</td>
          <td>18.0</td>
          <td>43.6</td>
          <td>2</td>
          <td>2021</td>
          <td>53.410804</td>
        </tr>
        <tr>
          <th>2020-09-12</th>
          <td>England</td>
          <td>Cardiff City</td>
          <td>Sheffield Wednesday</td>
          <td>51.14</td>
          <td>45.38</td>
          <td>0.4510</td>
          <td>0.2754</td>
          <td>0.2736</td>
          <td>1.54</td>
          <td>1.15</td>
          <td>18.6</td>
          <td>37.2</td>
          <td>2</td>
          <td>2021</td>
          <td>48.088131</td>
        </tr>
        <tr>
          <th>2020-09-12</th>
          <td>England</td>
          <td>Millwall</td>
          <td>Stoke City</td>
          <td>48.58</td>
          <td>53.50</td>
          <td>0.3535</td>
          <td>0.3645</td>
          <td>0.2820</td>
          <td>1.31</td>
          <td>1.34</td>
          <td>16.3</td>
          <td>24.1</td>
          <td>2</td>
          <td>2021</td>
          <td>50.921434</td>
        </tr>
        <tr>
          <th>2020-09-12</th>
          <td>England</td>
          <td>Preston North End</td>
          <td>Swansea City</td>
          <td>48.02</td>
          <td>50.19</td>
          <td>0.3799</td>
          <td>0.3285</td>
          <td>0.2916</td>
          <td>1.30</td>
          <td>1.19</td>
          <td>16.2</td>
          <td>20.0</td>
          <td>2</td>
          <td>2021</td>
          <td>49.081026</td>
        </tr>
        <tr>
          <th>...</th>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
        </tr>
        <tr>
          <th>2020-11-13</th>
          <td>England</td>
          <td>Bolton</td>
          <td>Salford City</td>
          <td>11.98</td>
          <td>23.41</td>
          <td>0.2144</td>
          <td>0.5392</td>
          <td>0.2464</td>
          <td>0.99</td>
          <td>1.72</td>
          <td>14.2</td>
          <td>61.4</td>
          <td>4</td>
          <td>2021</td>
          <td>15.849212</td>
        </tr>
        <tr>
          <th>2021-01-05</th>
          <td>England</td>
          <td>Mansfield Town</td>
          <td>Salford City</td>
          <td>12.82</td>
          <td>20.45</td>
          <td>0.2246</td>
          <td>0.5119</td>
          <td>0.2635</td>
          <td>0.94</td>
          <td>1.56</td>
          <td>15.7</td>
          <td>65.8</td>
          <td>4</td>
          <td>2021</td>
          <td>15.760084</td>
        </tr>
        <tr>
          <th>2021-03-30</th>
          <td>England</td>
          <td>Carlisle United</td>
          <td>Crawley Town</td>
          <td>10.55</td>
          <td>10.85</td>
          <td>0.3937</td>
          <td>0.3466</td>
          <td>0.2596</td>
          <td>1.47</td>
          <td>1.36</td>
          <td>7.4</td>
          <td>8.5</td>
          <td>4</td>
          <td>2021</td>
          <td>10.697897</td>
        </tr>
        <tr>
          <th>2021-05-20</th>
          <td>England</td>
          <td>Tranmere Rovers</td>
          <td>Morecambe</td>
          <td>11.11</td>
          <td>17.40</td>
          <td>0.3403</td>
          <td>0.3779</td>
          <td>0.2818</td>
          <td>1.19</td>
          <td>1.27</td>
          <td>100.0</td>
          <td>100.0</td>
          <td>4</td>
          <td>2021</td>
          <td>13.561136</td>
        </tr>
        <tr>
          <th>2021-05-31</th>
          <td>England</td>
          <td>Morecambe</td>
          <td>Newport County</td>
          <td>17.71</td>
          <td>12.81</td>
          <td>0.5309</td>
          <td>0.4691</td>
          <td>0.0000</td>
          <td>1.23</td>
          <td>1.13</td>
          <td>100.0</td>
          <td>100.0</td>
          <td>4</td>
          <td>2021</td>
          <td>14.866651</td>
        </tr>
      </tbody>
    </table>
    <p>51309 rows × 15 columns</p>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 69-70

The targets:

.. GENERATED FROM PYTHON SOURCE LINES 70-72

.. code-block:: default

    Y_train






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>away_win__full_time_goals</th>
          <th>draw__full_time_goals</th>
          <th>home_win__full_time_goals</th>
          <th>over_1.5__full_time_goals</th>
          <th>over_2.5__full_time_goals</th>
          <th>over_3.5__full_time_goals</th>
          <th>over_4.5__full_time_goals</th>
          <th>under_1.5__full_time_goals</th>
          <th>under_2.5__full_time_goals</th>
          <th>under_3.5__full_time_goals</th>
          <th>under_4.5__full_time_goals</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>0</th>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>1</th>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>2</th>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>3</th>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>4</th>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>...</th>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
        </tr>
        <tr>
          <th>51304</th>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>51305</th>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>51306</th>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
        </tr>
        <tr>
          <th>51307</th>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
        <tr>
          <th>51308</th>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>False</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
          <td>True</td>
        </tr>
      </tbody>
    </table>
    <p>51309 rows × 11 columns</p>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 73-75

Extracting the fixtures data
##############################################################################

.. GENERATED FROM PYTHON SOURCE LINES 77-80

We extract the fixtures data with columns that match the columns of the
training data. On the other hand, the fixtures data are not affected by
the `param_grid` selection.

.. GENERATED FROM PYTHON SOURCE LINES 80-83

.. code-block:: default


    X_fix, *_ = dataloader.extract_fixtures_data()








.. GENERATED FROM PYTHON SOURCE LINES 84-85

The input data:

.. GENERATED FROM PYTHON SOURCE LINES 85-86

.. code-block:: default

    X_fix





.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>league</th>
          <th>home_team</th>
          <th>away_team</th>
          <th>home_team_soccer_power_index</th>
          <th>away_team_soccer_power_index</th>
          <th>home_team_probability_win</th>
          <th>away_team_probability_win</th>
          <th>probability_draw</th>
          <th>home_team_projected_score</th>
          <th>away_team_projected_score</th>
          <th>home_team_match_importance</th>
          <th>away_team_match_importance</th>
          <th>division</th>
          <th>year</th>
          <th>match_quality</th>
        </tr>
        <tr>
          <th>date</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>2021-12-22</th>
          <td>France</td>
          <td>Clermont Foot</td>
          <td>Strasbourg</td>
          <td>53.40</td>
          <td>66.23</td>
          <td>0.3004</td>
          <td>0.4410</td>
          <td>0.2586</td>
          <td>1.23</td>
          <td>1.55</td>
          <td>30.5</td>
          <td>33.2</td>
          <td>1</td>
          <td>2022</td>
          <td>59.127008</td>
        </tr>
        <tr>
          <th>2021-12-22</th>
          <td>France</td>
          <td>Montpellier</td>
          <td>Angers</td>
          <td>58.37</td>
          <td>57.60</td>
          <td>0.4522</td>
          <td>0.2760</td>
          <td>0.2718</td>
          <td>1.45</td>
          <td>1.07</td>
          <td>20.0</td>
          <td>9.5</td>
          <td>1</td>
          <td>2022</td>
          <td>57.982444</td>
        </tr>
        <tr>
          <th>2021-12-22</th>
          <td>Scotland</td>
          <td>St Johnstone</td>
          <td>Ross County</td>
          <td>27.82</td>
          <td>31.14</td>
          <td>0.3917</td>
          <td>0.3261</td>
          <td>0.2822</td>
          <td>1.24</td>
          <td>1.11</td>
          <td>53.4</td>
          <td>45.5</td>
          <td>1</td>
          <td>2022</td>
          <td>29.386526</td>
        </tr>
        <tr>
          <th>2021-12-22</th>
          <td>Italy</td>
          <td>Empoli</td>
          <td>AC Milan</td>
          <td>55.62</td>
          <td>75.96</td>
          <td>0.1797</td>
          <td>0.6030</td>
          <td>0.2173</td>
          <td>1.00</td>
          <td>2.01</td>
          <td>3.8</td>
          <td>61.5</td>
          <td>1</td>
          <td>2022</td>
          <td>64.217893</td>
        </tr>
        <tr>
          <th>2021-12-22</th>
          <td>Italy</td>
          <td>Napoli</td>
          <td>Spezia</td>
          <td>78.97</td>
          <td>48.96</td>
          <td>0.7386</td>
          <td>0.0900</td>
          <td>0.1714</td>
          <td>2.30</td>
          <td>0.66</td>
          <td>58.2</td>
          <td>47.3</td>
          <td>1</td>
          <td>2022</td>
          <td>60.445106</td>
        </tr>
        <tr>
          <th>...</th>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
        </tr>
        <tr>
          <th>2022-05-29</th>
          <td>Spain</td>
          <td>Real Valladolid</td>
          <td>SD Huesca</td>
          <td>43.87</td>
          <td>31.45</td>
          <td>0.5315</td>
          <td>0.2036</td>
          <td>0.2649</td>
          <td>1.66</td>
          <td>0.93</td>
          <td>NaN</td>
          <td>NaN</td>
          <td>2</td>
          <td>2022</td>
          <td>36.635993</td>
        </tr>
        <tr>
          <th>2022-05-29</th>
          <td>Spain</td>
          <td>Real Oviedo</td>
          <td>UD Ibiza</td>
          <td>34.04</td>
          <td>27.78</td>
          <td>0.4757</td>
          <td>0.2155</td>
          <td>0.3089</td>
          <td>1.32</td>
          <td>0.78</td>
          <td>NaN</td>
          <td>NaN</td>
          <td>2</td>
          <td>2022</td>
          <td>30.593051</td>
        </tr>
        <tr>
          <th>2022-05-29</th>
          <td>Spain</td>
          <td>Leganes</td>
          <td>Almeria</td>
          <td>38.32</td>
          <td>45.95</td>
          <td>0.3400</td>
          <td>0.3490</td>
          <td>0.3110</td>
          <td>1.12</td>
          <td>1.13</td>
          <td>NaN</td>
          <td>NaN</td>
          <td>2</td>
          <td>2022</td>
          <td>41.789581</td>
        </tr>
        <tr>
          <th>2022-05-29</th>
          <td>Spain</td>
          <td>Real Sociedad II</td>
          <td>Real Zaragoza</td>
          <td>25.54</td>
          <td>30.82</td>
          <td>0.3444</td>
          <td>0.3365</td>
          <td>0.3191</td>
          <td>1.08</td>
          <td>1.07</td>
          <td>NaN</td>
          <td>NaN</td>
          <td>2</td>
          <td>2022</td>
          <td>27.932676</td>
        </tr>
        <tr>
          <th>2022-05-29</th>
          <td>Spain</td>
          <td>Lugo</td>
          <td>MÃ¡laga</td>
          <td>28.56</td>
          <td>26.29</td>
          <td>0.4287</td>
          <td>0.2690</td>
          <td>0.3023</td>
          <td>1.31</td>
          <td>0.98</td>
          <td>NaN</td>
          <td>NaN</td>
          <td>2</td>
          <td>2022</td>
          <td>27.378027</td>
        </tr>
      </tbody>
    </table>
    <p>4128 rows × 15 columns</p>
    </div>
    </div>
    <br />
    <br />


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  13.426 seconds)


.. _sphx_glr_download_auto_examples_extract_fte_soccer_data.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: extract_fte_soccer_data.py <extract_fte_soccer_data.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: extract_fte_soccer_data.ipynb <extract_fte_soccer_data.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
