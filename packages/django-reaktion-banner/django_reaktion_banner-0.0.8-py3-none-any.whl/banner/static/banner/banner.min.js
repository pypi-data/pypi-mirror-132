function init_ads(){const i=(t,e,n)=>{var o=document.getElementsByName("csrfmiddlewaretoken")[0].value;window.fetch(`${API_ENDPOINT}/${e}/${t}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":o},body:JSON.stringify(n)}).then(t=>t.json()).catch(t=>{console.log(t)})};let o=[],l;l=document.getElementsByClassName("banner-box"),0==l.length&&(l=document.getElementsByClassName("banner-box"));const c=window.location.href.split("?")[0],t=()=>{for(var t of l){var e,n;!function(t){if("none"!=getComputedStyle(t).display){t=t.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}}(t)||0!=o.includes(t)||(e=t.getAttribute("banner-id"),n={url:c},i("view",e,n),o.push(t))}};(()=>{for(var t of l)t.onclick=function(t){let e=this.getAttribute("banner-url");var n=this.getAttribute("banner-id"),o={url:window.location.href.split("?")[0],full_url:window.location.href};1==t.target.matches("img")&&null==e||(i("click",n,o),null!=e&&setTimeout(function(){let t=window.open(e,"_blank");t.focus()},500))}})(),t(),document.addEventListener("scroll",function(){o.length!=l.length&&t()},{passive:!0})}document.addEventListener("DOMContentLoaded",function(){init_ads()});